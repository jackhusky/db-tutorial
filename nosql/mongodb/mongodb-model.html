<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB х╗║циб | DB-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/db-tutorial/favicon.ico">
    <meta name="description" content="цХ░цНох║УцХЩчиЛ">
    <link rel="preload" href="/db-tutorial/assets/css/0.styles.634a41a8.css" as="style"><link rel="preload" href="/db-tutorial/assets/js/app.f29cbebc.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/4.af39a5fc.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/34.cf51b09b.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/5.0833ef28.js" as="script"><link rel="prefetch" href="/db-tutorial/assets/js/10.6b2ec097.js"><link rel="prefetch" href="/db-tutorial/assets/js/11.fe247a47.js"><link rel="prefetch" href="/db-tutorial/assets/js/12.e26c5b2b.js"><link rel="prefetch" href="/db-tutorial/assets/js/13.2ea5597a.js"><link rel="prefetch" href="/db-tutorial/assets/js/14.c4329e96.js"><link rel="prefetch" href="/db-tutorial/assets/js/15.abd00e69.js"><link rel="prefetch" href="/db-tutorial/assets/js/16.f2fb3266.js"><link rel="prefetch" href="/db-tutorial/assets/js/17.ca8c65ee.js"><link rel="prefetch" href="/db-tutorial/assets/js/18.e65a545a.js"><link rel="prefetch" href="/db-tutorial/assets/js/19.80ebef0a.js"><link rel="prefetch" href="/db-tutorial/assets/js/20.4f4377f5.js"><link rel="prefetch" href="/db-tutorial/assets/js/21.0983e68b.js"><link rel="prefetch" href="/db-tutorial/assets/js/22.22549083.js"><link rel="prefetch" href="/db-tutorial/assets/js/23.4cd8f92b.js"><link rel="prefetch" href="/db-tutorial/assets/js/24.e6a7e02c.js"><link rel="prefetch" href="/db-tutorial/assets/js/25.fc3242b3.js"><link rel="prefetch" href="/db-tutorial/assets/js/26.2b1e6a49.js"><link rel="prefetch" href="/db-tutorial/assets/js/27.e1993f74.js"><link rel="prefetch" href="/db-tutorial/assets/js/28.bd52979c.js"><link rel="prefetch" href="/db-tutorial/assets/js/29.3062fb0d.js"><link rel="prefetch" href="/db-tutorial/assets/js/30.cf6658ff.js"><link rel="prefetch" href="/db-tutorial/assets/js/31.579bfba3.js"><link rel="prefetch" href="/db-tutorial/assets/js/32.760e57b8.js"><link rel="prefetch" href="/db-tutorial/assets/js/33.6bacc202.js"><link rel="prefetch" href="/db-tutorial/assets/js/35.b5c3639e.js"><link rel="prefetch" href="/db-tutorial/assets/js/36.296d25a5.js"><link rel="prefetch" href="/db-tutorial/assets/js/37.273ae643.js"><link rel="prefetch" href="/db-tutorial/assets/js/38.cc9c86d4.js"><link rel="prefetch" href="/db-tutorial/assets/js/39.7ede2256.js"><link rel="prefetch" href="/db-tutorial/assets/js/40.24d223a3.js"><link rel="prefetch" href="/db-tutorial/assets/js/41.d258cb86.js"><link rel="prefetch" href="/db-tutorial/assets/js/42.ba081766.js"><link rel="prefetch" href="/db-tutorial/assets/js/43.725edc07.js"><link rel="prefetch" href="/db-tutorial/assets/js/44.b674669d.js"><link rel="prefetch" href="/db-tutorial/assets/js/45.8f1d6536.js"><link rel="prefetch" href="/db-tutorial/assets/js/46.6e80620c.js"><link rel="prefetch" href="/db-tutorial/assets/js/47.171574eb.js"><link rel="prefetch" href="/db-tutorial/assets/js/48.8e9f5f77.js"><link rel="prefetch" href="/db-tutorial/assets/js/49.be5d55cf.js"><link rel="prefetch" href="/db-tutorial/assets/js/50.47613447.js"><link rel="prefetch" href="/db-tutorial/assets/js/51.2d41393b.js"><link rel="prefetch" href="/db-tutorial/assets/js/52.fd1c4457.js"><link rel="prefetch" href="/db-tutorial/assets/js/53.4110063d.js"><link rel="prefetch" href="/db-tutorial/assets/js/54.605fb79c.js"><link rel="prefetch" href="/db-tutorial/assets/js/55.5e21fc50.js"><link rel="prefetch" href="/db-tutorial/assets/js/56.63d90acc.js"><link rel="prefetch" href="/db-tutorial/assets/js/57.e4e93067.js"><link rel="prefetch" href="/db-tutorial/assets/js/58.e78118bb.js"><link rel="prefetch" href="/db-tutorial/assets/js/59.d7cb0130.js"><link rel="prefetch" href="/db-tutorial/assets/js/6.278670fd.js"><link rel="prefetch" href="/db-tutorial/assets/js/60.a013e1eb.js"><link rel="prefetch" href="/db-tutorial/assets/js/61.c22d11d4.js"><link rel="prefetch" href="/db-tutorial/assets/js/62.f169c057.js"><link rel="prefetch" href="/db-tutorial/assets/js/63.70d5a041.js"><link rel="prefetch" href="/db-tutorial/assets/js/64.c4586b91.js"><link rel="prefetch" href="/db-tutorial/assets/js/65.7e7aec26.js"><link rel="prefetch" href="/db-tutorial/assets/js/66.ec0b0ee4.js"><link rel="prefetch" href="/db-tutorial/assets/js/67.dca67a56.js"><link rel="prefetch" href="/db-tutorial/assets/js/68.d16570b7.js"><link rel="prefetch" href="/db-tutorial/assets/js/69.67735e91.js"><link rel="prefetch" href="/db-tutorial/assets/js/7.a10910a7.js"><link rel="prefetch" href="/db-tutorial/assets/js/8.04e2e190.js"><link rel="prefetch" href="/db-tutorial/assets/js/9.cccc2c89.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~flowchart.d81c2c68.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~notification.4573acaf.js">
    <link rel="stylesheet" href="/db-tutorial/assets/css/0.styles.634a41a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/db-tutorial/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="DB-TUTORIAL" class="logo"> <span class="site-name can-hide">DB-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link router-link-active">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link router-link-active">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MongoDB х╗║циб</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#mongodb-цХ░цНох╗║цибхЕещЧи" class="sidebar-link">MongoDB цХ░цНох╗║цибхЕещЧи</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#ф╕А-хоЪф╣ЙцХ░цНощЫЖ" class="sidebar-link">я╝Иф╕Ая╝ЙхоЪф╣ЙцХ░цНощЫЖ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#ф║М-цАЭшАГ-json-ч╗УцЮД" class="sidebar-link">я╝Иф║Мя╝ЙцАЭшАГ JSON ч╗УцЮД</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#ф╕Й-чбохоЪхУкф║ЫхнЧцо╡ф╜Ьф╕║х╡МхЕех╝ПцХ░цНо" class="sidebar-link">я╝Иф╕Йя╝ЙчбохоЪхУкф║ЫхнЧцо╡ф╜Ьф╕║х╡МхЕех╝ПцХ░цНо</a></li></ul></li><li><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#цХ░цНоцибхЮЛчоАф╗Л" class="sidebar-link">цХ░цНоцибхЮЛчоАф╗Л</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#чБ╡ц┤╗чЪД-schema" class="sidebar-link">чБ╡ц┤╗чЪД Schema</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#document-ч╗УцЮД" class="sidebar-link">Document ч╗УцЮД</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#хОЯхнРхЖЩцУНф╜Ь" class="sidebar-link">хОЯхнРхЖЩцУНф╜Ь</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#цХ░цНоф╜┐чФихТМцАзшГ╜" class="sidebar-link">цХ░цНоф╜┐чФихТМцАзшГ╜</a></li></ul></li><li><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#schema-цабщкМ" class="sidebar-link">Schema цабщкМ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#цМЗхоЪцабщкМшзДхИЩ" class="sidebar-link">цМЗхоЪцабщкМшзДхИЩ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#json-schema" class="sidebar-link">JSON Schema</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#хЕ╢хоГцЯешпвшбиш╛╛х╝П" class="sidebar-link">хЕ╢хоГцЯешпвшбиш╛╛х╝П</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#шбМф╕║" class="sidebar-link">шбМф╕║</a></li></ul></li><li><a href="/db-tutorial/nosql/mongodb/mongodb-model.html#хПВшАГш╡ДцЦЩ" class="sidebar-link">хПВшАГш╡ДцЦЩ</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mongodb-х╗║циб"><a href="#mongodb-х╗║циб" class="header-anchor">#</a> MongoDB х╗║циб</h1> <p>MongoDB чЪДцХ░цНоцибх╝ПцШпф╕АчзНчБ╡ц┤╗цибх╝Пя╝МхЕ│ч│╗хЮЛцХ░цНох║УшжБц▒Вф╜ахЬицПТхЕецХ░цНоф╣ЛхЙНх┐Ещб╗хЕИхоЪф╣Йхе╜ф╕Аф╕кшбичЪДцибх╝Пч╗УцЮДя╝МшАМ MongoDB чЪДщЫЖхРИхИЩх╣╢ф╕НщЩРхИ╢ document ч╗УцЮДуАВш┐ЩчзНчБ╡ц┤╗цАзшойхп╣ш▒бхТМцХ░цНох║УцЦЗцбгф╣ЛщЧ┤чЪДцШах░ДхПШх╛Чх╛Ихо╣цШУуАВхН│ф╜┐цХ░цНошо░х╜Хф╣ЛщЧ┤цЬЙх╛ИхдзчЪДхПШхМЦя╝МцпПф╕кцЦЗцбгф╣ЯхПпф╗ех╛Ихе╜чЪДцШах░ДхИ░хРДцЭбф╕НхРМчЪДшо░х╜ХуАВ х╜УчД╢хЬихоЮщЩЕф╜┐чФиф╕ня╝МхРМф╕Аф╕кщЫЖхРИф╕нчЪДцЦЗцбгх╛Ах╛АщГ╜цЬЙф╕Аф╕кцпФш╛Гч▒╗ф╝╝чЪДч╗УцЮДуАВ</p> <p>цХ░цНоцибхЮЛшо╛шобф╕нцЬАхЕ╖цМСцИШцАзчЪДцШпхЬих║ФчФичиЛх║ПщЬАц▒Вя╝МцХ░цНох║Ух╝ХцУОцАзшГ╜шжБц▒ВхТМцХ░цНошп╗хЖЩцибх╝Пф╣ЛщЧ┤хБЪцЭГшббшАГщЗПуАВх╜Ушо╛шобцХ░цНоцибхЮЛчЪДцЧ╢хАЩя╝Мф╕АхоЪшжБшАГшЩСх║ФчФичиЛх║Пхп╣цХ░цНочЪДф╜┐чФицибх╝Пя╝ИхжВцЯешпвя╝МцЫ┤цЦ░хТМхдДчРЖя╝Йф╗ехПКцХ░цНоцЬмш║лчЪДхдйчД╢ч╗УцЮДуАВ</p> <ul><li><a href="#mongodb-%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1%E5%85%A5%E9%97%A8">MongoDB цХ░цНох╗║цибхЕещЧи</a> <ul><li><a href="#%E4%B8%80%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E9%9B%86">я╝Иф╕Ая╝ЙхоЪф╣ЙцХ░цНощЫЖ</a></li> <li><a href="#%E4%BA%8C%E6%80%9D%E8%80%83-json-%E7%BB%93%E6%9E%84">я╝Иф║Мя╝ЙцАЭшАГ JSON ч╗УцЮД</a></li> <li><a href="#%E4%B8%89%E7%A1%AE%E5%AE%9A%E5%93%AA%E4%BA%9B%E5%AD%97%E6%AE%B5%E4%BD%9C%E4%B8%BA%E5%B5%8C%E5%85%A5%E5%BC%8F%E6%95%B0%E6%8D%AE">я╝Иф╕Йя╝ЙчбохоЪхУкф║ЫхнЧцо╡ф╜Ьф╕║х╡МхЕех╝ПцХ░цНо</a></li></ul></li> <li><a href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E7%AE%80%E4%BB%8B">цХ░цНоцибхЮЛчоАф╗Л</a> <ul><li><a href="#%E7%81%B5%E6%B4%BB%E7%9A%84-schema">чБ╡ц┤╗чЪД Schema</a></li> <li><a href="#document-%E7%BB%93%E6%9E%84">Document ч╗УцЮД</a></li> <li><a href="#%E5%8E%9F%E5%AD%90%E5%86%99%E6%93%8D%E4%BD%9C">хОЯхнРхЖЩцУНф╜Ь</a></li> <li><a href="#%E6%95%B0%E6%8D%AE%E4%BD%BF%E7%94%A8%E5%92%8C%E6%80%A7%E8%83%BD">цХ░цНоф╜┐чФихТМцАзшГ╜</a></li></ul></li> <li><a href="#schema-%E6%A0%A1%E9%AA%8C">Schema цабщкМ</a> <ul><li><a href="#%E6%8C%87%E5%AE%9A%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99">цМЗхоЪцабщкМшзДхИЩ</a></li> <li><a href="#json-schema">JSON Schema</a></li> <li><a href="#%E5%85%B6%E5%AE%83%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F">хЕ╢хоГцЯешпвшбиш╛╛х╝П</a></li> <li><a href="#%E8%A1%8C%E4%B8%BA">шбМф╕║</a></li></ul></li> <li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">хПВшАГш╡ДцЦЩ</a></li></ul> <h2 id="mongodb-цХ░цНох╗║цибхЕещЧи"><a href="#mongodb-цХ░цНох╗║цибхЕещЧи" class="header-anchor">#</a> MongoDB цХ░цНох╗║цибхЕещЧи</h2> <blockquote><p>хПВшАГя╝Ъhttps://docs.mongodb.com/guides/server/introduction/#what-you-ll-need</p></blockquote> <h3 id="ф╕А-хоЪф╣ЙцХ░цНощЫЖ"><a href="#ф╕А-хоЪф╣ЙцХ░цНощЫЖ" class="header-anchor">#</a> я╝Иф╕Ая╝ЙхоЪф╣ЙцХ░цНощЫЖ</h3> <p>х╜УщЬАшжБх╗║члЛцХ░цНохнШхВицЧ╢я╝МщжЦхЕИх║ФшпецАЭшАГф╗еф╕ЛщЧощвШя╝ЪщЬАшжБхнШхВихУкф║ЫцХ░цНоя╝Яш┐Щф║ЫхнЧцо╡ф╣ЛщЧ┤хжВф╜ХхЕ│шБФя╝Я</p> <p>ш┐ЩцШпф╕Аф╕кцХ░цНох╗║цибчЪДш┐ЗчиЛуАВчЫоцаЗцШп<strong>х░Жф╕ЪхКбщЬАц▒ВцК╜ш▒бф╕║щА╗ш╛СцибхЮЛ</strong>уАВ</p> <p>хБЗшо╛ш┐Щца╖ф╕Аф╕кхЬ║цЩпя╝ЪцИСф╗мщЬАшжБх╗║члЛцХ░цНох║Уф╗еш╖Яш╕кчЙйцЦЩхПКхЕ╢цХ░щЗПя╝Мхдзх░Пя╝МцаЗчн╛хТМчнЙч║зуАВ</p> <p>хжВцЮЬцШпхнШхВихЬи RDBMSя╝МхПпшГ╜ф╗еф╕ЛчЪДцХ░цНошбия╝Ъ</p> <table><thead><tr><th style="text-align:left;">name</th> <th style="text-align:left;">quantity</th> <th style="text-align:left;">size</th> <th style="text-align:left;">status</th> <th style="text-align:left;">tags</th> <th style="text-align:left;">rating</th></tr></thead> <tbody><tr><td style="text-align:left;">journal</td> <td style="text-align:left;">25</td> <td style="text-align:left;">14x21,cm</td> <td style="text-align:left;">A</td> <td style="text-align:left;">brown, lined</td> <td style="text-align:left;">9</td></tr> <tr><td style="text-align:left;">notebook</td> <td style="text-align:left;">50</td> <td style="text-align:left;">8.5x11,in</td> <td style="text-align:left;">A</td> <td style="text-align:left;">college-ruled,perforated</td> <td style="text-align:left;">8</td></tr> <tr><td style="text-align:left;">paper</td> <td style="text-align:left;">100</td> <td style="text-align:left;">8.5x11,in</td> <td style="text-align:left;">D</td> <td style="text-align:left;">watercolor</td> <td style="text-align:left;">10</td></tr> <tr><td style="text-align:left;">planner</td> <td style="text-align:left;">75</td> <td style="text-align:left;">22.85x30,cm</td> <td style="text-align:left;">D</td> <td style="text-align:left;">2019</td> <td style="text-align:left;">10</td></tr> <tr><td style="text-align:left;">postcard</td> <td style="text-align:left;">45</td> <td style="text-align:left;">10x,cm</td> <td style="text-align:left;">D</td> <td style="text-align:left;">double-sided,white</td> <td style="text-align:left;">2</td></tr></tbody></table> <h3 id="ф║М-цАЭшАГ-json-ч╗УцЮД"><a href="#ф║М-цАЭшАГ-json-ч╗УцЮД" class="header-anchor">#</a> я╝Иф║Мя╝ЙцАЭшАГ JSON ч╗УцЮД</h3> <p>ф╗Оф╕Кф╛Лф╕нхПпф╗ечЬЛхЗ║я╝Мшбиф╝╝ф╣ОцШпхнШхВицХ░цНочЪДхе╜хЬ░цЦ╣я╝Мф╜ЖшпецХ░цНощЫЖф╕нчЪДхнЧцо╡щЬАшжБхдЪф╕кхА╝я╝МхжВцЮЬхЬихНХф╕кхИЧф╕нх╗║цибя╝МхИЩф╕Нхо╣цШУцРЬч┤вцИЦцШ╛чд║я╝Ихп╣ф║О ф╛ЛхжВтАУхдзх░ПхТМцаЗчн╛я╝ЙуАВ</p> <p>хЬи SQL цХ░цНох║Уф╕ня╝МцВихПпф╗ещАЪш┐ЗхИЫх╗║хЕ│ч│╗шбицЭешзгхЖ│цндщЧощвШуАВ</p> <p>хЬи MongoDB ф╕ня╝МцХ░цНохнШхВиф╕║цЦЗцбгя╝Иdocumentя╝ЙуАВ ш┐Щф║ЫцЦЗцбгф╗е JSONя╝ИJavaScript хп╣ш▒бшбичд║ц│Хя╝Йца╝х╝ПхнШхВихЬи MongoDB ф╕нуАВ JSON цЦЗцбгцФпцМБх╡МхЕех╝ПхнЧцо╡я╝МхЫацндчЫ╕хЕ│цХ░цНохТМцХ░цНохИЧшбихПпф╗еф╕ОцЦЗцбгф╕Аш╡╖хнШхВия╝МшАМф╕НцШпф╕ОхдЦщГишбиф╕Аш╡╖хнШхВиуАВ</p> <p>JSON ца╝х╝Пф╕║щФо/хА╝хп╣уАВ хЬи JSON цЦЗцбгф╕ня╝МхнЧцо╡хРНхТМхА╝чФихЖТхП╖хИЖщЪФя╝МхнЧцо╡хРНхТМхА╝хп╣чФищАЧхП╖хИЖщЪФя╝Мх╣╢ф╕ФхнЧцо╡щЫЖх░БшгЕхЬитАЬхдзцЛмхП╖тАЭя╝И<code>{}</code>я╝Йф╕нуАВ</p> <p>хжВцЮЬшжБх╝АхзЛхп╣ф╕КщЭвчЪДшбМф╣Лф╕Аш┐ЫшбМх╗║цибя╝Мф╛ЛхжВцндшбМя╝Ъ</p> <table><thead><tr><th style="text-align:left;">name</th> <th style="text-align:left;">quantity</th> <th style="text-align:left;">size</th> <th style="text-align:left;">status</th> <th style="text-align:left;">tags</th> <th style="text-align:left;">rating</th></tr></thead> <tbody><tr><td style="text-align:left;">notebook</td> <td style="text-align:left;">50</td> <td style="text-align:left;">8.5x11,in</td> <td style="text-align:left;">A</td> <td style="text-align:left;">college-ruled,perforated</td> <td style="text-align:left;">8</td></tr></tbody></table> <p>цВихПпф╗еф╗О name хТМ quantity хнЧцо╡х╝АхзЛуАВ хЬи JSON ф╕ня╝Мш┐Щф║ЫхнЧцо╡хжВф╕ЛцЙАчд║я╝Ъ</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;notebook&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;qty&quot;</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="ф╕Й-чбохоЪхУкф║ЫхнЧцо╡ф╜Ьф╕║х╡МхЕех╝ПцХ░цНо"><a href="#ф╕Й-чбохоЪхУкф║ЫхнЧцо╡ф╜Ьф╕║х╡МхЕех╝ПцХ░цНо" class="header-anchor">#</a> я╝Иф╕Йя╝ЙчбохоЪхУкф║ЫхнЧцо╡ф╜Ьф╕║х╡МхЕех╝ПцХ░цНо</h3> <p>цОеф╕ЛцЭея╝МщЬАшжБчбохоЪхУкф║ЫхнЧцо╡хПпшГ╜щЬАшжБхдЪф╕кхА╝уАВхПпф╗ешАГшЩСх░Жш┐Щф║ЫхнЧцо╡ф╜Ьф╕║х╡МхЕех╝ПцЦЗцбгцИЦх╡МхЕех╝ПцЦЗцбгф╕нчЪД хИЧшби/цХ░ч╗Д хп╣ш▒буАВ</p> <p>ф╛ЛхжВя╝МхЬиф╕КщЭвчЪДчд║ф╛Лф╕ня╝Мsize хПпшГ╜хМЕхРлф╕Йф╕кхнЧцо╡я╝Ъ</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;h&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token property">&quot;w&quot;</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token property">&quot;uom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;in&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><p>And some items have multiple ratings, so <code>ratings</code> might be represented as a list of documents containing the field <code>scores</code>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token number">9</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>And you might need to handle multiple tags per item. So you might store them in a list too.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token string">&quot;college-ruled&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;perforated&quot;</span><span class="token punctuation">]</span>
</code></pre></div><p>Finally, a JSON document that stores an inventory item might look like this:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;notebook&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;qty&quot;</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rating&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token number">9</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">8.5</span><span class="token punctuation">,</span> <span class="token property">&quot;unit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;in&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;college-ruled&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;perforated&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This looks very different from the tabular data structure you started with in Step 1.</p> <h2 id="цХ░цНоцибхЮЛчоАф╗Л"><a href="#цХ░цНоцибхЮЛчоАф╗Л" class="header-anchor">#</a> цХ░цНоцибхЮЛчоАф╗Л</h2> <p>цХ░цНох╗║цибф╕нчЪДхЕ│щФоцМСцИШцШпх╣│шббх║ФчФичиЛх║ПчЪДщЬАц▒ВуАБцХ░цНох║Ух╝ХцУОчЪДцАзшГ╜ф╗ехПКцХ░цНоцгАч┤вцибх╝ПуАВ хЬишо╛шобцХ░цНоцибхЮЛцЧ╢я╝МхзЛч╗ИщЬАшжБшАГшЩСцХ░цНочЪДх║ФчФичиЛх║Пф╜┐чФицГЕхЖ╡я╝ИхН│цХ░цНочЪДцЯешпвя╝МцЫ┤цЦ░хТМхдДчРЖя╝Йф╗ехПКцХ░цНоцЬмш║лчЪДхЫ║цЬЙч╗УцЮДуАВ</p> <h3 id="чБ╡ц┤╗чЪД-schema"><a href="#чБ╡ц┤╗чЪД-schema" class="header-anchor">#</a> чБ╡ц┤╗чЪД Schema</h3> <p>хЬихЕ│ч│╗хЮЛцХ░цНох║Уф╕ня╝Мх┐Ещб╗хЬицПТхЕецХ░цНоф╣ЛхЙНчбохоЪх╣╢хг░цШОшбичЪДч╗УцЮДуАВшАМ MongoDB чЪД collection щ╗ШшодцГЕхЖ╡ф╕Лф╕НщЬАшжБхЕ╢цЦЗцбгхЕ╖цЬЙчЫ╕хРМчЪДцЮ╢цЮДуАВф╣Ях░▒цШпшп┤я╝Ъ</p> <p>хРМф╕Аф╕к collection ф╕нчЪД document ф╕НщЬАшжБхЕ╖цЬЙчЫ╕хРМчЪД field щЫЖя╝Мх╣╢ф╕Ф field чЪДцХ░цНоч▒╗хЮЛхПпф╗ехЬищЫЖхРИф╕нчЪДф╕НхРМцЦЗцбгф╣ЛщЧ┤цЬЙцЙАф╕НхРМуАВ</p> <p>шжБцЫ┤цФ╣ collection ф╕нчЪД document ч╗УцЮДя╝Мф╛ЛхжВц╖╗хКацЦ░ fieldя╝МхИащЩдчО░цЬЙ field цИЦх░Ж field хА╝цЫ┤цФ╣ф╕║цЦ░ч▒╗хЮЛя╝МхПкщЬАшжБх░ЖцЦЗцбгцЫ┤цЦ░ф╕║цЦ░ч╗УцЮДхН│хПпуАВ</p> <p>ш┐ЩчзНчБ╡ц┤╗цАзцЬЙхКйф║Ох░Ж document цШах░ДхИ░хоЮф╜УцИЦхп╣ш▒буАВцпПф╕к document щГ╜хПпф╗ехМ╣щЕНцЙАшбичд║хоЮф╜УчЪДцХ░цНохнЧцо╡я╝МхН│ф╜┐шпецЦЗцбгф╕ОщЫЖхРИф╕нчЪДхЕ╢ф╗ЦцЦЗцбгцЬЙх╛ИхдзчЪДф╕НхРМуАВф╜ЖцШпя╝МхоЮщЩЕф╕Кя╝МщЫЖхРИф╕нчЪДцЦЗцбгхЕ╖цЬЙчЫ╕ф╝╝чЪДч╗УцЮДя╝Мх╣╢ф╕ФцВихПпф╗ехЬицЫ┤цЦ░хТМцПТхЕецУНф╜ЬцЬЯщЧ┤хп╣ collection х╝║хИ╢цЙзшбМ document цабщкМшзДхИЩуАВ</p> <h3 id="document-ч╗УцЮД"><a href="#document-ч╗УцЮД" class="header-anchor">#</a> Document ч╗УцЮД</h3> <h4 id="х╡МхЕех╝ПцХ░цНоцибхЮЛ"><a href="#х╡МхЕех╝ПцХ░цНоцибхЮЛ" class="header-anchor">#</a> х╡МхЕех╝ПцХ░цНоцибхЮЛ</h4> <p>х╡МхЕех╝П document щАЪш┐Зх░ЖчЫ╕хЕ│цХ░цНохнШхВихЬихНХф╕к document ч╗УцЮДф╕нцЭецНХшО╖цХ░цНоф╣ЛщЧ┤чЪДхЕ│ч│╗уАВ MongoDB document хПпф╗ех░Ж document ч╗УцЮДх╡МхЕехИ░хПжф╕Аф╕к document ф╕нчЪДхнЧцо╡цИЦцХ░ч╗Дф╕нуАВш┐Щф║ЫщЭЮшзДшМГхМЦчЪДцХ░цНоцибхЮЛхЕБшо╕х║ФчФичиЛх║ПхЬихНХф╕кцХ░цНох║УцУНф╜Ьф╕нцгАч┤вхТМцУНч║╡чЫ╕хЕ│цХ░цНоуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200910193231.png" alt="img"></p> <p>хп╣ф║О MongoDB ф╕нчЪДх╛ИхдЪхЬ║цЩпя╝МщЭЮшзДшМГхМЦцХ░цНоцибхЮЛщГ╜цШпцЬАф╜│чЪДуАВ</p> <blockquote><p>х╡МхЕех╝П document цЬЙхдзх░ПщЩРхИ╢я╝Ъх┐Ещб╗х░Пф║О 16 MBуАВ</p> <p>хжВцЮЬцШпш╛ГхдзчЪДф║Мш┐ЫхИ╢цХ░цНоя╝МхПпф╗ешАГшЩС <a href="https://docs.mongodb.com/manual/core/gridfs/" target="_blank" rel="noopener noreferrer">GridFS<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>уАВ</p></blockquote> <h4 id="х╝ХчФих╝ПцХ░цНоцибхЮЛ"><a href="#х╝ХчФих╝ПцХ░цНоцибхЮЛ" class="header-anchor">#</a> х╝ХчФих╝ПцХ░цНоцибхЮЛ</h4> <p>х╝ХчФищАЪш┐ЗхМЕхРлф╗Оф╕Аф╕к document хИ░хПжф╕Аф╕к document чЪДщУ╛цОецИЦх╝ХчФицЭехнШхВицХ░цНоф╣ЛщЧ┤чЪДхЕ│ч│╗уАВ х║ФчФичиЛх║ПхПпф╗ешзгцЮРш┐Щф║Ых╝ХчФиф╗ешо┐щЧочЫ╕хЕ│цХ░цНоуАВ х╣┐ф╣Йф╕Кшо▓я╝Мш┐Щф║ЫцШпшзДшМГхМЦчЪДцХ░цНоцибхЮЛуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200910193234.png" alt="img"></p> <p>щАЪх╕╕я╝МхЬиф╗еф╕ЛхЬ║цЩпф╜┐чФих╝ХчФих╝ПчЪДцХ░цНоцибхЮЛя╝Ъ</p> <ul><li>х╡МхЕецЧ╢ф╝Ъхп╝шЗ┤цХ░цНощЗНхдНя╝Мф╜ЖцЧац│ХцПРф╛Ыш╢│хдЯчЪДшп╗хПЦцАзшГ╜ф╝ШхК┐я╝МцЧац│ХшГЬш┐ЗщЗНхдНчЪДхРлф╣ЙуАВ</li> <li>ф╗гшбицЫ┤хдНцЭВчЪДхдЪхп╣хдЪхЕ│ч│╗уАВ</li> <li>ф╕║хдзшзДцибхИЖх▒ВцХ░цНощЫЖх╗║цибуАВ</li></ul> <p>ф╕║ф║Ж join collectionя╝МMongoDB цФпцМБшБЪхРИ stageя╝Ъ</p> <ul><li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><code>$lookup</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>я╝ИMongoDB 3.2 х╝АхзЛцФпцМБя╝Й</li> <li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/graphLookup/#pipe._S_graphLookup" target="_blank" rel="noopener noreferrer"><code>$graphLookup</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>я╝ИMongoDB 3.4 х╝АхзЛцФпцМБя╝Й</li></ul> <p>MongoDB ш┐ШцПРф╛Ыф║Жх╝ХчФицЭецФпцМБш╖ищЫЖхРИ join цХ░цНоя╝Ъ</p> <ul><li>х╝ХчФицХ░цНоцибхЮЛчд║ф╛Ля╝МхПВшАГя╝Ъ<a href="https://docs.mongodb.com/manual/tutorial/model-referenced-one-to-many-relationships-between-documents/#data-modeling-publisher-and-books" target="_blank" rel="noopener noreferrer">Model One-to-Many Relationships with Document References<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>цЫ┤хдЪцаСх╜вцибхЮЛя╝МхПВшАГя╝Ъ<a href="https://docs.mongodb.com/manual/applications/data-models-tree-structures/" target="_blank" rel="noopener noreferrer">Model Tree Structures<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ul> <h3 id="хОЯхнРхЖЩцУНф╜Ь"><a href="#хОЯхнРхЖЩцУНф╜Ь" class="header-anchor">#</a> хОЯхнРхЖЩцУНф╜Ь</h3> <h4 id="хНХ-document-чЪДхОЯхнРцАз"><a href="#хНХ-document-чЪДхОЯхнРцАз" class="header-anchor">#</a> хНХ document чЪДхОЯхнРцАз</h4> <p>хЬи MongoDB ф╕ня╝МщТИхп╣хНХф╕к document чЪДхЖЩцУНф╜ЬцШпхОЯхнРцАзчЪДя╝МхН│ф╜┐шпе document ф╕нх╡МхЕеф║ЖхдЪф╕кхнР documentуАВ хЕ╖цЬЙх╡МхЕецХ░цНочЪДщЭЮшзДшМГхМЦцХ░цНоцибхЮЛх░ЖцЙАцЬЙчЫ╕хЕ│цХ░цНохРИх╣╢хЬиф╕Аф╕к document ф╕ня╝МшАМф╕НцШпхЬихдЪф╕к document хТМ collection ф╕нш┐ЫшбМшзДшМГхМЦуАВ шпецХ░цНоцибхЮЛцЬЙхКйф║ОхОЯхнРцУНф╜ЬуАВ х╜УхНХф╕кхЖЩхЕецУНф╜Ья╝Иф╛ЛхжВ <a href="https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/#db.collection.updateMany" target="_blank" rel="noopener noreferrer"><code>db.collection.updateMany()</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>я╝Йф┐оцФ╣хдЪф╕к document цЧ╢я╝МцпПф╕к document чЪДчЛмчлЛф┐оцФ╣цШпхОЯхнРчЪДя╝Мф╜ЖцХ┤ф╕кцУНф╜Ьф╕НцШпхОЯхнРчЪДуАВ</p> <h4 id="хдЪ-document-ф║ЛхКб"><a href="#хдЪ-document-ф║ЛхКб" class="header-anchor">#</a> хдЪ document ф║ЛхКб</h4> <p>хп╣ф║ОщЬАшжБхп╣хдЪф╕к documentя╝ИхЬихНХф╕кцИЦхдЪф╕кщЫЖхРИф╕ня╝Йш┐ЫшбМшп╗хЖЩхОЯхнРцАзчЪДцГЕхЖ╡я╝МMongoDB цФпцМБхдЪ document ф║ЛхКбуАВ</p> <ul><li>хЬичЙИцЬм 4.0 ф╕ня╝МMongoDB хЬихЙпцЬмщЫЖф╕КцФпцМБхдЪ document ф║ЛхКбуАВ</li> <li>хЬичЙИцЬм 4.2 ф╕ня╝МMongoDB х╝ХхЕеф║ЖхИЖх╕Гх╝Пф║ЛхКбя╝МхоГхвЮхКаф║Жхп╣хИЖчЙЗч╛дщЫЖф╕КхдЪ document ф║ЛхКбчЪДцФпцМБя╝Мх╣╢хРИх╣╢ф║Жхп╣хЙпцЬмщЫЖф╕КхдЪ document ф║ЛхКбчЪДчО░цЬЙцФпцМБуАВ</li></ul> <blockquote><p>хЬихдзхдЪцХ░цГЕхЖ╡ф╕Ля╝МхдЪ document ф║ЛхКбф╝ЪцпФхНХ document чЪДхЖЩхЕеф║зчФЯцЫ┤щлШчЪДцАзшГ╜ц╢ИшАЧя╝Мх╣╢ф╕ФхдЪ document ф║ЛхКбчЪДхПпчФицАзф╕НшГ╜цЫ┐ф╗гщлШцХИчЪДч╗УцЮДшо╛шобуАВ хЬишо╕хдЪцГЕхЖ╡ф╕Ля╝МщЭЮшзДшМГхМЦцХ░цНоцибхЮЛя╝Их╡МхЕех╝П document хТМцХ░ч╗Дя╝Йф╗НцШпцЬАф╜│щАЙцЛйуАВ ф╣Ях░▒цШпшп┤я╝МхРИчРЖчЪДцХ░цНох╗║цибя╝Мх░ЖцЬАхдзчиЛх║жхЬ░хЗПх░Схп╣хдЪ document ф║ЛхКбчЪДщЬАц▒ВуАВ</p></blockquote> <h3 id="цХ░цНоф╜┐чФихТМцАзшГ╜"><a href="#цХ░цНоф╜┐чФихТМцАзшГ╜" class="header-anchor">#</a> цХ░цНоф╜┐чФихТМцАзшГ╜</h3> <p>хЬишо╛шобцХ░цНоцибхЮЛцЧ╢я╝Мшп╖шАГшЩСх║ФчФичиЛх║Пх░ЖхжВф╜Хф╜┐чФицВичЪДцХ░цНох║УуАВ ф╛ЛхжВя╝МхжВцЮЬцВичЪДх║ФчФичиЛх║Пф╗Еф╜┐чФицЬАш┐СцПТхЕечЪД documentя╝Мшп╖шАГшЩСф╜┐чФиф╕КщЩРщЫЖхРИуАВ цИЦшАЕя╝МхжВцЮЬцВичЪДх║ФчФичиЛх║Пф╕╗шжБцШпхп╣ collection чЪДшп╗хПЦцУНф╜Ья╝МхИЩц╖╗хКач┤вх╝Хф╗ецПРщлШцАзшГ╜уАВ</p> <h2 id="schema-цабщкМ"><a href="#schema-цабщкМ" class="header-anchor">#</a> Schema цабщкМ</h2> <h3 id="цМЗхоЪцабщкМшзДхИЩ"><a href="#цМЗхоЪцабщкМшзДхИЩ" class="header-anchor">#</a> цМЗхоЪцабщкМшзДхИЩ</h3> <p>хжВцЮЬхИЫх╗║цЦ░ collection цЧ╢шжБцМЗхоЪцабщкМшзДхИЩя╝МщЬАшжБхЬиф╜┐чФи <a href="https://docs.mongodb.com/manual/reference/method/db.createCollection/#db.createCollection" target="_blank" rel="noopener noreferrer"><code>db.createCollection()</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> цЧ╢цМЗхоЪ <code>validator</code> щАЙщб╣уАВ</p> <p>хжВцЮЬшжБх░Ж document цабщкМц╖╗хКахИ░чО░цЬЙ collection ф╕ня╝МщЬАшжБф╜┐чФих╕жцЬЙ <code>validator</code> щАЙщб╣чЪД <a href="https://docs.mongodb.com/manual/reference/command/collMod/#dbcmd.collMod" target="_blank" rel="noopener noreferrer"><code>collMod</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> хС╜ф╗дуАВ</p> <p>MongoDB ш┐ШцПРф╛Ыф╗еф╕ЛчЫ╕хЕ│щАЙщб╣я╝Ъ</p> <ul><li><code>validationLevel</code> щАЙщб╣я╝ИчФиф║ОчбохоЪ MongoDB хЬицЫ┤цЦ░ш┐ЗчиЛф╕ня╝Мхп╣чО░цЬЙ document х║ФчФицабщкМшзДхИЩчЪДф╕еца╝чиЛх║жя╝Й</li> <li><code>validationAction</code> щАЙщб╣я╝ИчФиф║ОчбохоЪ MongoDB хПСчО░ш┐ЭхПНцабщкМшзДхИЩчЪД document цЧ╢я╝МцШпщАЙцЛйцКещФЩх╣╢цЛТч╗Эя╝Мш┐ШцШпцОехПЧцХ░цНоф╜ЖхЬицЧех┐Чф╕нхСКшнжя╝ЙуАВ</li></ul> <h3 id="json-schema"><a href="#json-schema" class="header-anchor">#</a> JSON Schema</h3> <p>ф╗О 3.6 чЙИцЬмх╝АхзЛя╝МMongoDB х╝АхзЛцФпцМБ JSON Schema цабщкМуАВ</p> <p>хПпф╗ещАЪш┐ЗхЬи validator шбиш╛╛х╝Пф╕нф╜┐чФи <a href="https://docs.mongodb.com/manual/reference/operator/query/jsonSchema/#op._S_jsonSchema" target="_blank" rel="noopener noreferrer"><code>$jsonSchema</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> цУНф╜ЬцЭецМЗхоЪ JSON Schema цабщкМуАВ</p> <p>уАРчд║ф╛ЛуАС</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">'students'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  validator<span class="token operator">:</span> <span class="token punctuation">{</span>
    $jsonSchema<span class="token operator">:</span> <span class="token punctuation">{</span>
      bsonType<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'year'</span><span class="token punctuation">,</span> <span class="token string">'major'</span><span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'must be a string and is required'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        year<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token string">'int'</span><span class="token punctuation">,</span>
          minimum<span class="token operator">:</span> <span class="token number">2017</span><span class="token punctuation">,</span>
          maximum<span class="token operator">:</span> <span class="token number">3017</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'must be an integer in [ 2017, 3017 ] and is required'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        major<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Math'</span><span class="token punctuation">,</span> <span class="token string">'English'</span><span class="token punctuation">,</span> <span class="token string">'Computer Science'</span><span class="token punctuation">,</span> <span class="token string">'History'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'can only be one of the enum values and is required'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        gpa<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'double'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'must be a double if the field exists'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        address<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'city'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          properties<span class="token operator">:</span> <span class="token punctuation">{</span>
            street<span class="token operator">:</span> <span class="token punctuation">{</span>
              bsonType<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
              description<span class="token operator">:</span> <span class="token string">'must be a string if the field exists'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            city<span class="token operator">:</span> <span class="token punctuation">{</span>
              bsonType<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
              description<span class="token operator">:</span> <span class="token string">'must be a string and is required'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="хЕ╢хоГцЯешпвшбиш╛╛х╝П"><a href="#хЕ╢хоГцЯешпвшбиш╛╛х╝П" class="header-anchor">#</a> хЕ╢хоГцЯешпвшбиш╛╛х╝П</h3> <p>щЩдф║Жф╜┐чФи <a href="https://docs.mongodb.com/manual/reference/operator/query/jsonSchema/#op._S_jsonSchema" target="_blank" rel="noopener noreferrer"><code>$jsonSchema</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> цЯешпвш┐РчоЧчмжчЪД JSON Schema цабщкМхдЦя╝МMongoDB ш┐ШцФпцМБхЕ╢хоГцЯешпвш┐РчоЧчмжчЪДцабщкМя╝Мф╜Жф╗еф╕ЛцГЕхЖ╡щЩдхдЦя╝Ъ</p> <ul><li><a href="https://docs.mongodb.com/manual/reference/operator/query/near/#op._S_near" target="_blank" rel="noopener noreferrer"><code>$near</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,</li> <li><a href="https://docs.mongodb.com/manual/reference/operator/query/nearSphere/#op._S_nearSphere" target="_blank" rel="noopener noreferrer"><code>$nearSphere</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,</li> <li><a href="https://docs.mongodb.com/manual/reference/operator/query/text/#op._S_text" target="_blank" rel="noopener noreferrer"><code>$text</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,</li> <li><a href="https://docs.mongodb.com/manual/reference/operator/query/where/#op._S_where" target="_blank" rel="noopener noreferrer"><code>$where</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and</li> <li>х╕жцЬЙ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/function/#exp._S_function" target="_blank" rel="noopener noreferrer"><code>$function</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> шбиш╛╛х╝ПчЪД <a href="https://docs.mongodb.com/manual/reference/operator/query/expr/#op._S_expr" target="_blank" rel="noopener noreferrer"><code>$expr</code><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>уАРчд║ф╛ЛуАСцЯешпвшбиш╛╛х╝Пф╕нцМЗхоЪцабщкМшзДхИЩ</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">'contacts'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  validator<span class="token operator">:</span> <span class="token punctuation">{</span>
    $or<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> phone<span class="token operator">:</span> <span class="token punctuation">{</span> $type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> email<span class="token operator">:</span> <span class="token punctuation">{</span> $regex<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">@mongodb\.com$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token punctuation">{</span> $<span class="token keyword">in</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Unknown'</span><span class="token punctuation">,</span> <span class="token string">'Incomplete'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="шбМф╕║"><a href="#шбМф╕║" class="header-anchor">#</a> шбМф╕║</h3> <p>цабщкМхПСчФЯхЬицЫ┤цЦ░хТМцПТхЕецЬЯщЧ┤уАВц╖╗хКацабщкМшзДхИЩхИ░ collection цЧ╢я╝Мф╕Нф╝Ъхп╣чО░цЬЙчЪД document ш┐ЫшбМцабщкМя╝МщЩдщЭЮхПСчФЯф┐оцФ╣цУНф╜ЬуАВ</p> <h4 id="чО░цЬЙчЪД-document"><a href="#чО░цЬЙчЪД-document" class="header-anchor">#</a> чО░цЬЙчЪД document</h4> <p><code>validationLevel</code> щАЙщб╣чбохоЪ MongoDB ш┐ЫшбМшзДхИЩцабщкМцЧ╢цЙзшбМчЪДцУНф╜Ья╝Ъ</p> <ul><li>хжВцЮЬ <code>validationLevel</code> цШп strictя╝Иф╕еца╝ч║зхИлуАВш┐ЩцШп MongoDB щ╗Шшодч║зхИля╝Йя╝МхИЩ MongoDB х░ЖцабщкМшзДхИЩх║ФчФиф║ОцЙАцЬЙцПТхЕехТМцЫ┤цЦ░уАВ</li> <li>хжВцЮЬ <code>validationLevel</code> цШп moderateя╝Иф╕нчнЙч║зхИля╝Йя╝МхИЩ MongoDB хПкхп╣х╖▓ц╗бш╢│цабщкМцЭбф╗╢чЪДчО░цЬЙцЦЗцбгчЪДцПТхЕехТМцЫ┤цЦ░цУНф╜Ьш┐ЫшбМцабщкМя╝Ыхп╣ф╕НчмжхРИцабщкМцаЗхЗЖчЪДчО░цЬЙцЦЗцбгчЪДцЫ┤цЦ░цУНф╜Ьф╕Нш┐ЫшбМцабщкМуАВ</li></ul> <p>уАРчд║ф╛ЛуАС</p> <p>ф╕ЛщЭвцШпф╕Аф╕кцнгх╕╕чЪДцПТхЕецУНф╜Ья╝Ъ</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>contacts<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'Anne'</span><span class="token punctuation">,</span>
    phone<span class="token operator">:</span> <span class="token string">'+1 555 123 456'</span><span class="token punctuation">,</span>
    city<span class="token operator">:</span> <span class="token string">'London'</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'Complete'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> _id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'Ivan'</span><span class="token punctuation">,</span> city<span class="token operator">:</span> <span class="token string">'Vancouver'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>хЬи collection ф╕КщЕНч╜оф╕Аф╕кцабщкМшзДхИЩя╝Ъ</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>db<span class="token punctuation">.</span><span class="token function">runCommand</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  collMod<span class="token operator">:</span> <span class="token string">'contacts'</span><span class="token punctuation">,</span>
  validator<span class="token operator">:</span> <span class="token punctuation">{</span>
    $jsonSchema<span class="token operator">:</span> <span class="token punctuation">{</span>
      bsonType<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'phone'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        phone<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'must be a string and is required'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'must be a string and is required'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  validationLevel<span class="token operator">:</span> <span class="token string">'moderate'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>хИЩ <code>contacts</code> collection чО░хЬиц╖╗хКаф║ЖхРлф╕нчнЙч║зхИля╝Иmoderateя╝Й validationLevel чЪД <code>validator</code>я╝Ъ</p> <ul><li><p>хжВцЮЬх░ЭшпХцЫ┤цЦ░ <code>_id</code>ф╕║ 1 чЪДцЦЗцбгя╝МхИЩ MongoDB х░Жх║ФчФицабщкМшзДхИЩя╝МхЫаф╕║чО░цЬЙцЦЗцбгчмжхРИцЭбф╗╢уАВ</p></li> <li><p>чЫ╕хПНя╝МMongoDB ф╕Нф╝Ъх░ЖцабщкМ <code>_id</code> ф╕║ 2 чЪДцЦЗцбгя╝МхЫаф╕║хоГф╕НчмжхРИцабщкМшзДхИЩуАВ</p></li></ul> <p>хжВцЮЬшжБхоМхЕичжБчФицабщкМя╝МхПпф╗ех░Ж <code>validationLevel</code> ч╜оф╕║ <code>off</code>уАВ</p> <h4 id="цОехПЧцИЦцЛТч╗ЭцЧацХИчЪД-document"><a href="#цОехПЧцИЦцЛТч╗ЭцЧацХИчЪД-document" class="header-anchor">#</a> цОехПЧцИЦцЛТч╗ЭцЧацХИчЪД document</h4> <ul><li>хжВцЮЬ validationAction цШп Errorя╝Ищ╗Шшодя╝Йя╝МхИЩ MongoDB цЛТч╗Эф╗╗ф╜Хш┐ЭхПНцабщкМшзДхИЩчЪДцПТхЕецИЦцЫ┤цЦ░уАВ</li> <li>хжВцЮЬ validationAction цШп Warnя╝МMongoDB ф╝Ъшо░х╜ХцЙАцЬЙчЪДш┐ЭшзДя╝Мф╜ЖхЕБшо╕ш┐ЫшбМцПТхЕецИЦцЫ┤цЦ░уАВ</li></ul> <p>уАРчд║ф╛ЛуАС</p> <p>хИЫх╗║щЫЖхРИцЧ╢я╝МщЕНч╜о <code>validationAction</code> ф╕║ warnуАВ</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">'contacts2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  validator<span class="token operator">:</span> <span class="token punctuation">{</span>
    $jsonSchema<span class="token operator">:</span> <span class="token punctuation">{</span>
      bsonType<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'phone'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        phone<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'must be a string and is required'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        email<span class="token operator">:</span> <span class="token punctuation">{</span>
          bsonType<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          pattern<span class="token operator">:</span> <span class="token string">'@mongodb.com$'</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span>
            <span class="token string">'must be a string and match the regular expression pattern'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        status<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Unknown'</span><span class="token punctuation">,</span> <span class="token string">'Incomplete'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          description<span class="token operator">:</span> <span class="token string">'can only be one of the enum values'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  validationAction<span class="token operator">:</span> <span class="token string">'warn'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>х░ЭшпХцПТхЕеф╕АцЭбш┐ЭшзДшо░х╜Х</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>contacts2<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Amanda&quot;</span><span class="token punctuation">,</span> status<span class="token operator">:</span> <span class="token string">&quot;Updated&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>MongoDB хЕБшо╕ш┐ЩцЭбцУНф╜ЬцЙзшбМя╝Мф╜ЖцШпцЬНхКбхЩиф╝Ъшо░х╜Хф╕ЛхСКшнжф┐бцБпуАВ</p> <div class="language- extra-class"><pre class="language-text"><code>{&quot;t&quot;:{&quot;$date&quot;:&quot;2020-09-11T16:35:57.754+08:00&quot;},&quot;s&quot;:&quot;W&quot;,  &quot;c&quot;:&quot;STORAGE&quot;,  &quot;id&quot;:20294,   &quot;ctx&quot;:&quot;conn14&quot;,&quot;msg&quot;:&quot;Document would fail validation&quot;,&quot;attr&quot;:{&quot;namespace&quot;:&quot;test.contacts2&quot;,&quot;document&quot;:{&quot;_id&quot;:{&quot;$oid&quot;:&quot;5f5b36ed8ea53d62a0b51c4e&quot;},&quot;name&quot;:&quot;Amanda&quot;,&quot;status&quot;:&quot;Updated&quot;}}}
</code></pre></div><h4 id="щЩРхИ╢"><a href="#щЩРхИ╢" class="header-anchor">#</a> щЩРхИ╢</h4> <p>ф╕НшГ╜хЬи <code>admin</code>уАБ<code>local</code>уАБ<code>config</code> ш┐ЩхЗаф╕кчЙ╣цоКчЪДцХ░цНох║Уф╕нцМЗхоЪцабщкМшзДхИЩуАВ</p> <p>ф╕НшГ╜хЬи <code>system.*</code> collection ф╕нцМЗхоЪцабщкМуАВ</p> <h2 id="хПВшАГш╡ДцЦЩ"><a href="#хПВшАГш╡ДцЦЩ" class="header-anchor">#</a> хПВшАГш╡ДцЦЩ</h2> <ul><li><strong>хоШцЦ╣</strong> <ul><li><a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB хоШч╜С<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/mongodb/mongo" target="_blank" rel="noopener noreferrer">MongoDB Github<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://university.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB хоШцЦ╣хЕНш┤╣цХЩчиЛ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><strong>цХЩчиЛ</strong> <ul><li><a href="https://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="noopener noreferrer">MongoDB цХЩчиЛ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://time.geekbang.org/course/intro/100040001" target="_blank" rel="noopener noreferrer">MongoDB щлШцЙЛшп╛<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/db-tutorial/edit/master/docs/nosql/mongodb/mongodb-model.md" target="_blank" rel="noopener noreferrer">х╕охКйцИСф╗мцФ╣хЦДцндщб╡щЭвя╝Б</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/db-tutorial/assets/js/app.f29cbebc.js" defer></script><script src="/db-tutorial/assets/js/4.af39a5fc.js" defer></script><script src="/db-tutorial/assets/js/34.cf51b09b.js" defer></script><script src="/db-tutorial/assets/js/5.0833ef28.js" defer></script>
  </body>
</html>
