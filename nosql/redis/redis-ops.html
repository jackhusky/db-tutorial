<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis У┐љу╗┤ | DB-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/db-tutorial/favicon.ico">
    <meta name="description" content="ТЋ░ТЇ«т║ЊТЋЎуеІ">
    <link rel="preload" href="/db-tutorial/assets/css/0.styles.634a41a8.css" as="style"><link rel="preload" href="/db-tutorial/assets/js/app.f29cbebc.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/4.af39a5fc.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/46.6e80620c.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/5.0833ef28.js" as="script"><link rel="prefetch" href="/db-tutorial/assets/js/10.6b2ec097.js"><link rel="prefetch" href="/db-tutorial/assets/js/11.fe247a47.js"><link rel="prefetch" href="/db-tutorial/assets/js/12.e26c5b2b.js"><link rel="prefetch" href="/db-tutorial/assets/js/13.2ea5597a.js"><link rel="prefetch" href="/db-tutorial/assets/js/14.c4329e96.js"><link rel="prefetch" href="/db-tutorial/assets/js/15.abd00e69.js"><link rel="prefetch" href="/db-tutorial/assets/js/16.f2fb3266.js"><link rel="prefetch" href="/db-tutorial/assets/js/17.ca8c65ee.js"><link rel="prefetch" href="/db-tutorial/assets/js/18.e65a545a.js"><link rel="prefetch" href="/db-tutorial/assets/js/19.80ebef0a.js"><link rel="prefetch" href="/db-tutorial/assets/js/20.4f4377f5.js"><link rel="prefetch" href="/db-tutorial/assets/js/21.0983e68b.js"><link rel="prefetch" href="/db-tutorial/assets/js/22.22549083.js"><link rel="prefetch" href="/db-tutorial/assets/js/23.4cd8f92b.js"><link rel="prefetch" href="/db-tutorial/assets/js/24.e6a7e02c.js"><link rel="prefetch" href="/db-tutorial/assets/js/25.fc3242b3.js"><link rel="prefetch" href="/db-tutorial/assets/js/26.2b1e6a49.js"><link rel="prefetch" href="/db-tutorial/assets/js/27.e1993f74.js"><link rel="prefetch" href="/db-tutorial/assets/js/28.bd52979c.js"><link rel="prefetch" href="/db-tutorial/assets/js/29.3062fb0d.js"><link rel="prefetch" href="/db-tutorial/assets/js/30.cf6658ff.js"><link rel="prefetch" href="/db-tutorial/assets/js/31.579bfba3.js"><link rel="prefetch" href="/db-tutorial/assets/js/32.760e57b8.js"><link rel="prefetch" href="/db-tutorial/assets/js/33.6bacc202.js"><link rel="prefetch" href="/db-tutorial/assets/js/34.cf51b09b.js"><link rel="prefetch" href="/db-tutorial/assets/js/35.b5c3639e.js"><link rel="prefetch" href="/db-tutorial/assets/js/36.296d25a5.js"><link rel="prefetch" href="/db-tutorial/assets/js/37.273ae643.js"><link rel="prefetch" href="/db-tutorial/assets/js/38.cc9c86d4.js"><link rel="prefetch" href="/db-tutorial/assets/js/39.7ede2256.js"><link rel="prefetch" href="/db-tutorial/assets/js/40.24d223a3.js"><link rel="prefetch" href="/db-tutorial/assets/js/41.d258cb86.js"><link rel="prefetch" href="/db-tutorial/assets/js/42.ba081766.js"><link rel="prefetch" href="/db-tutorial/assets/js/43.725edc07.js"><link rel="prefetch" href="/db-tutorial/assets/js/44.b674669d.js"><link rel="prefetch" href="/db-tutorial/assets/js/45.8f1d6536.js"><link rel="prefetch" href="/db-tutorial/assets/js/47.171574eb.js"><link rel="prefetch" href="/db-tutorial/assets/js/48.8e9f5f77.js"><link rel="prefetch" href="/db-tutorial/assets/js/49.be5d55cf.js"><link rel="prefetch" href="/db-tutorial/assets/js/50.47613447.js"><link rel="prefetch" href="/db-tutorial/assets/js/51.2d41393b.js"><link rel="prefetch" href="/db-tutorial/assets/js/52.fd1c4457.js"><link rel="prefetch" href="/db-tutorial/assets/js/53.4110063d.js"><link rel="prefetch" href="/db-tutorial/assets/js/54.605fb79c.js"><link rel="prefetch" href="/db-tutorial/assets/js/55.5e21fc50.js"><link rel="prefetch" href="/db-tutorial/assets/js/56.63d90acc.js"><link rel="prefetch" href="/db-tutorial/assets/js/57.e4e93067.js"><link rel="prefetch" href="/db-tutorial/assets/js/58.e78118bb.js"><link rel="prefetch" href="/db-tutorial/assets/js/59.d7cb0130.js"><link rel="prefetch" href="/db-tutorial/assets/js/6.278670fd.js"><link rel="prefetch" href="/db-tutorial/assets/js/60.a013e1eb.js"><link rel="prefetch" href="/db-tutorial/assets/js/61.c22d11d4.js"><link rel="prefetch" href="/db-tutorial/assets/js/62.f169c057.js"><link rel="prefetch" href="/db-tutorial/assets/js/63.70d5a041.js"><link rel="prefetch" href="/db-tutorial/assets/js/64.c4586b91.js"><link rel="prefetch" href="/db-tutorial/assets/js/65.7e7aec26.js"><link rel="prefetch" href="/db-tutorial/assets/js/66.ec0b0ee4.js"><link rel="prefetch" href="/db-tutorial/assets/js/67.dca67a56.js"><link rel="prefetch" href="/db-tutorial/assets/js/68.d16570b7.js"><link rel="prefetch" href="/db-tutorial/assets/js/69.67735e91.js"><link rel="prefetch" href="/db-tutorial/assets/js/7.a10910a7.js"><link rel="prefetch" href="/db-tutorial/assets/js/8.04e2e190.js"><link rel="prefetch" href="/db-tutorial/assets/js/9.cccc2c89.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~flowchart.d81c2c68.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~notification.4573acaf.js">
    <link rel="stylesheet" href="/db-tutorial/assets/css/0.styles.634a41a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/db-tutorial/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="DB-TUTORIAL" class="logo"> <span class="site-name can-hide">DB-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link router-link-active">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ­Ъј» тЇџт«б
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link router-link-active">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ­Ъј» тЇџт«б
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Redis У┐љу╗┤</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/nosql/redis/redis-ops.html#СИђсђЂredis-т«ЅУБЁ" class="sidebar-link">СИђсђЂRedis т«ЅУБЁ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#window-СИІт«ЅУБЁ" class="sidebar-link">Window СИІт«ЅУБЁ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#linux-СИІт«ЅУБЁ" class="sidebar-link">Linux СИІт«ЅУБЁ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#ubuntu-СИІт«ЅУБЁ" class="sidebar-link">Ubuntu СИІт«ЅУБЁ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#т╝ђТю║тљ»тіе" class="sidebar-link">т╝ђТю║тљ»тіе</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#т╝ђТћЙжў▓уЂФтбЎуФ»тЈБ" class="sidebar-link">т╝ђТћЙжў▓уЂФтбЎуФ»тЈБ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#redis-т«ЅУБЁУёџТюг" class="sidebar-link">Redis т«ЅУБЁУёџТюг</a></li></ul></li><li><a href="/db-tutorial/nosql/redis/redis-ops.html#С║їсђЂredis-тЇЋТю║Сй┐ућетњїжЁЇуй«" class="sidebar-link">С║їсђЂRedis тЇЋТю║Сй┐ућетњїжЁЇуй«</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#тљ»тіе-redis" class="sidebar-link">тљ»тіе Redis</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#redis-тИИУДЂжЁЇуй«" class="sidebar-link">Redis тИИУДЂжЁЇуй«</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#У«ЙСИ║т«ѕТіцУ┐ЏуеІ" class="sidebar-link">У«ЙСИ║т«ѕТіцУ┐ЏуеІ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#тјІтіЏТхІУ»Ћ" class="sidebar-link">тјІтіЏТхІУ»Ћ</a></li></ul></li><li><a href="/db-tutorial/nosql/redis/redis-ops.html#СИЅсђЂredis-жЏєуЙцСй┐ућетњїжЁЇуй«" class="sidebar-link">СИЅсђЂRedis жЏєуЙцСй┐ућетњїжЁЇуй«</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#жЏєуЙцУДётѕњ" class="sidebar-link">жЏєуЙцУДётѕњ</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#жЃеуй▓жЏєуЙц" class="sidebar-link">жЃеуй▓жЏєуЙц</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#жЃеуй▓тЊетЁх" class="sidebar-link">жЃеуй▓тЊетЁх</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#ТЅЕт«╣" class="sidebar-link">ТЅЕт«╣</a></li></ul></li><li><a href="/db-tutorial/nosql/redis/redis-ops.html#тЏЏсђЂredis-тЉйС╗ц" class="sidebar-link">тЏЏсђЂRedis тЉйС╗ц</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#жђџућетЉйС╗ц" class="sidebar-link">жђџућетЉйС╗ц</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/redis/redis-ops.html#жЏєуЙцтЉйС╗ц" class="sidebar-link">жЏєуЙцтЉйС╗ц</a></li></ul></li><li><a href="/db-tutorial/nosql/redis/redis-ops.html#С║ћсђЂт«бТѕиуФ»" class="sidebar-link">С║ћсђЂт«бТѕиуФ»</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/redis/redis-ops.html#тЈѓУђЃУхёТќЎ" class="sidebar-link">тЈѓУђЃУхёТќЎ</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="redis-У┐љу╗┤"><a href="#redis-У┐љу╗┤" class="header-anchor">#</a> Redis У┐љу╗┤</h1> <blockquote><p><strong>Redis</strong> Тў»СИђСИфжФўТђДУЃйуџё key-value ТЋ░ТЇ«т║Њсђѓ</p> <p>SET ТЊЇСйюТ»ЈуДњжњЪ 110000 ТгА№╝ЏGET ТЊЇСйюТ»ЈуДњжњЪ 81000 ТгАсђѓ</p></blockquote> <ul><li><a href="#%E4%B8%80redis-%E5%AE%89%E8%A3%85">СИђсђЂRedis т«ЅУБЁ</a> <ul><li><a href="#window-%E4%B8%8B%E5%AE%89%E8%A3%85">Window СИІт«ЅУБЁ</a></li> <li><a href="#linux-%E4%B8%8B%E5%AE%89%E8%A3%85">Linux СИІт«ЅУБЁ</a></li> <li><a href="#ubuntu-%E4%B8%8B%E5%AE%89%E8%A3%85">Ubuntu СИІт«ЅУБЁ</a></li> <li><a href="#%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8">т╝ђТю║тљ»тіе</a></li> <li><a href="#%E5%BC%80%E6%94%BE%E9%98%B2%E7%81%AB%E5%A2%99%E7%AB%AF%E5%8F%A3">т╝ђТћЙжў▓уЂФтбЎуФ»тЈБ</a></li> <li><a href="#redis-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC">Redis т«ЅУБЁУёџТюг</a></li></ul></li> <li><a href="#%E4%BA%8Credis-%E5%8D%95%E6%9C%BA%E4%BD%BF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AE">С║їсђЂRedis тЇЋТю║Сй┐ућетњїжЁЇуй«</a> <ul><li><a href="#%E5%90%AF%E5%8A%A8-redis">тљ»тіе Redis</a></li> <li><a href="#redis-%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE">Redis тИИУДЂжЁЇуй«</a></li> <li><a href="#%E8%AE%BE%E4%B8%BA%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B">У«ЙСИ║т«ѕТіцУ┐ЏуеІ</a></li> <li><a href="#%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95">тјІтіЏТхІУ»Ћ</a></li></ul></li> <li><a href="#%E4%B8%89redis-%E9%9B%86%E7%BE%A4%E4%BD%BF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AE">СИЅсђЂRedis жЏєуЙцСй┐ућетњїжЁЇуй«</a> <ul><li><a href="#%E9%9B%86%E7%BE%A4%E8%A7%84%E5%88%92">жЏєуЙцУДётѕњ</a></li> <li><a href="#%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4">жЃеуй▓жЏєуЙц</a></li> <li><a href="#%E9%83%A8%E7%BD%B2%E5%93%A8%E5%85%B5">жЃеуй▓тЊетЁх</a></li> <li><a href="#%E6%89%A9%E5%AE%B9">ТЅЕт«╣</a></li></ul></li> <li><a href="#%E5%9B%9Bredis-%E5%91%BD%E4%BB%A4">тЏЏсђЂRedis тЉйС╗ц</a> <ul><li><a href="#%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4">жђџућетЉйС╗ц</a></li> <li><a href="#%E9%9B%86%E7%BE%A4%E5%91%BD%E4%BB%A4">жЏєуЙцтЉйС╗ц</a></li></ul></li> <li><a href="#%E4%BA%94%E5%AE%A2%E6%88%B7%E7%AB%AF">С║ћсђЂт«бТѕиуФ»</a></li> <li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">тЈѓУђЃУхёТќЎ</a></li></ul> <h2 id="СИђсђЂredis-т«ЅУБЁ"><a href="#СИђсђЂredis-т«ЅУБЁ" class="header-anchor">#</a> СИђсђЂRedis т«ЅУБЁ</h2> <h3 id="window-СИІт«ЅУБЁ"><a href="#window-СИІт«ЅУБЁ" class="header-anchor">#</a> Window СИІт«ЅУБЁ</h3> <p><strong>СИІУййтю░тЮђ№╝џ</strong><a href="https://github.com/MSOpenTech/redis/releases" target="_blank" rel="noopener noreferrer">https://github.com/MSOpenTech/redis/releases<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>сђѓ</p> <p>Redis Тћ»ТїЂ 32 СйЇтњї 64 СйЇсђѓУ┐ЎСИфжюђУдЂТа╣ТЇ«Сйау│╗у╗Ът╣│тЈ░уџёт«ъжЎЁТЃЁтєхжђЅТІЕ№╝їУ┐ЎжЄїТѕЉС╗гСИІУйй <strong>Redis-x64-xxx.zip</strong>тјІу╝ЕтїЁтѕ░ C уЏў№╝їУДБтјІтљј№╝їт░єТќЄС╗Хтц╣жЄЇТќ░тЉйтљЇСИ║ <strong>redis</strong>сђѓ</p> <p>ТЅЊт╝ђСИђСИф <strong>cmd</strong> уфЌтЈБ Сй┐уће cd тЉйС╗цтѕЄТЇбуЏ«тйЋтѕ░ <strong>C:\redis</strong> У┐љУАї <strong>redis-server.exe redis.windows.conf</strong> сђѓ</p> <p>тдѓТъюТЃ│Тќ╣СЙ┐уџёУ»Ю№╝їтЈ»С╗ЦТіі redis уџёУи»тЙётіатѕ░у│╗у╗Ъуџёуј»тбЃтЈўжЄЈжЄї№╝їУ┐ЎТаит░▒уюЂтЙЌтєЇУЙЊУи»тЙёС║є№╝їтљјжЮбуџёжѓБСИф redis.windows.conf тЈ»С╗ЦуюЂуЋЦ№╝їтдѓТъюуюЂуЋЦ№╝їС╝џтљ»ућеж╗ўУ«цуџёсђѓ</p> <p>У┐ЎТЌХтђЎтЈдтљ»СИђСИф cmd уфЌтЈБ№╝їтјЪТЮЦуџёСИЇУдЂтЁ│жЌГ№╝їСИЇуёХт░▒ТЌаТ│ЋУ«┐жЌ«ТюЇтіАуФ»С║єсђѓ</p> <p>тѕЄТЇбтѕ░ redis уЏ«тйЋСИІУ┐љУАї <strong>redis-cli.exe -h 127.0.0.1 -p 6379</strong> сђѓ</p> <h3 id="linux-СИІт«ЅУБЁ"><a href="#linux-СИІт«ЅУБЁ" class="header-anchor">#</a> Linux СИІт«ЅУБЁ</h3> <p><strong>СИІУййтю░тЮђ№╝џ</strong> http://redis.io/download№╝їСИІУййТюђТќ░ТќЄТАБуЅѕТюгсђѓ</p> <p>СИІУййсђЂУДБтјІсђЂу╝ќУ»Љ Redis</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> http://download.redis.io/releases/redis-5.0.4.tar.gz
<span class="token function">tar</span> xzf redis-5.0.4.tar.gz
<span class="token builtin class-name">cd</span> redis-5.0.4
<span class="token function">make</span>
</code></pre></div><p>СИ║С║єу╝ќУ»Љ Redis Т║љуаЂ№╝їСйажюђУдЂ gcc-c++тњї tclсђѓтдѓТъюСйауџёу│╗у╗ЪТў» CentOS№╝їтЈ»С╗ЦуЏ┤ТјЦТЅДУАїтЉйС╗ц№╝џ<code>yum install -y gcc-c++ tcl</code> ТЮЦт«ЅУБЁсђѓ</p> <p>У┐ЏтЁЦтѕ░УДБтјІтљјуџё <code>src</code> уЏ«тйЋ№╝їжђџУ┐ЄтдѓСИІтЉйС╗цтљ»тіе Redis:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>src/redis-server
</code></pre></div><p>ТѓетЈ»С╗ЦСй┐ућетєЁуй«уџёт«бТѕиуФ»СИј Redis У┐ЏУАїС║цС║њ:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ src/redis-cli
redis<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> foo bar
OK
redis<span class="token operator">&gt;</span> get foo
<span class="token string">&quot;bar&quot;</span>
</code></pre></div><h3 id="ubuntu-СИІт«ЅУБЁ"><a href="#ubuntu-СИІт«ЅУБЁ" class="header-anchor">#</a> Ubuntu СИІт«ЅУБЁ</h3> <p>тюе Ubuntu у│╗у╗Ът«ЅУБЁ Redis тЈ»С╗ЦСй┐ућеС╗ЦСИІтЉйС╗ц:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> redis-server
</code></pre></div><h3 id="т╝ђТю║тљ»тіе"><a href="#т╝ђТю║тљ»тіе" class="header-anchor">#</a> т╝ђТю║тљ»тіе</h3> <ul><li>т╝ђТю║тљ»тіежЁЇуй«№╝џ<code>echo &quot;/usr/local/bin/redis-server /etc/redis.conf&quot; &gt;&gt; /etc/rc.local</code></li></ul> <h3 id="т╝ђТћЙжў▓уЂФтбЎуФ»тЈБ"><a href="#т╝ђТћЙжў▓уЂФтбЎуФ»тЈБ" class="header-anchor">#</a> т╝ђТћЙжў▓уЂФтбЎуФ»тЈБ</h3> <ul><li>Ти╗тіаУДётѕЎ№╝џ<code>iptables -I INPUT -p tcp -m tcp --dport 6379 -j ACCEPT</code></li> <li>С┐ЮтГўУДётѕЎ№╝џ<code>service iptables save</code></li> <li>жЄЇтљ» iptables№╝џ<code>service iptables restart</code></li></ul> <h3 id="redis-т«ЅУБЁУёџТюг"><a href="#redis-т«ЅУБЁУёџТюг" class="header-anchor">#</a> Redis т«ЅУБЁУёџТюг</h3> <blockquote><p>CentOS7 уј»тбЃт«ЅУБЁУёџТюг№╝џ<a href="https://github.com/dunwu/linux-tutorial/tree/master/codes/linux/soft" target="_blank" rel="noopener noreferrer">Уй»С╗ХУ┐љу╗┤жЁЇуй«УёџТюгжЏєтљѕ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p><strong>т«ЅУБЁУ»┤Тўј</strong></p> <ul><li>жЄЄућеу╝ќУ»ЉТќ╣т╝Јт«ЅУБЁ Redis, т╣Хт░єтЁХТ│етєїСИ║ systemd ТюЇтіА</li> <li>т«ЅУБЁУи»тЙёСИ║№╝џ<code>/usr/local/redis</code></li> <li>ж╗ўУ«цСИІУййт«ЅУБЁ <code>5.0.4</code> уЅѕТюг№╝їуФ»тЈБтЈиСИ║№╝џ<code>6379</code>№╝їт»єуаЂСИ║уЕ║</li></ul> <p><strong>Сй┐ућеТќ╣Т│Ћ</strong></p> <ul><li>ж╗ўУ«цт«ЅУБЁ - ТЅДУАїС╗ЦСИІС╗╗ТёЈтЉйС╗цтЇ│тЈ»№╝џ</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> -o- https://gitee.com/turnon/linux-tutorial/raw/master/codes/linux/soft/redis-install.sh <span class="token operator">|</span> <span class="token function">bash</span>
<span class="token function">wget</span> -qO- https://gitee.com/turnon/linux-tutorial/raw/master/codes/linux/soft/redis-install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre></div><ul><li>УЄфт«џС╣Ѕт«ЅУБЁ - СИІУййУёџТюгтѕ░Тюгтю░№╝їт╣ХТїЅуЁДС╗ЦСИІТа╝т╝ЈТЅДУАї№╝џ</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sh</span> redis-install.sh <span class="token punctuation">[</span>version<span class="token punctuation">]</span> <span class="token punctuation">[</span>port<span class="token punctuation">]</span> <span class="token punctuation">[</span>password<span class="token punctuation">]</span>
</code></pre></div><p>тЈѓТЋ░У»┤Тўј№╝џ</p> <ul><li><code>version</code> - redis уЅѕТюгтЈи</li> <li><code>port</code> - redis ТюЇтіАуФ»тЈБтЈи</li> <li><code>password</code> - У«┐жЌ«т»єуаЂ</li></ul> <h2 id="С║їсђЂredis-тЇЋТю║Сй┐ућетњїжЁЇуй«"><a href="#С║їсђЂredis-тЇЋТю║Сй┐ућетњїжЁЇуй«" class="header-anchor">#</a> С║їсђЂRedis тЇЋТю║Сй┐ућетњїжЁЇуй«</h2> <h3 id="тљ»тіе-redis"><a href="#тљ»тіе-redis" class="header-anchor">#</a> тљ»тіе Redis</h3> <p><strong>тљ»тіе redis ТюЇтіА</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/redis/src
./redis-server
</code></pre></div><p><strong>тљ»тіе redis т«бТѕиуФ»</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/redis/src
./redis-cli
</code></pre></div><p><strong>ТЪЦуюІ redis Тў»тљдтљ»тіе</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>redis-cli
</code></pre></div><p>С╗ЦСИітЉйС╗цт░єТЅЊт╝ђС╗ЦСИІу╗ѕуФ»№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code>redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre></div><p>127.0.0.1 Тў»ТюгТю║ IP №╝ї6379 Тў» redis ТюЇтіАуФ»тЈБсђѓуј░тюеТѕЉС╗гУЙЊтЁЦ PING тЉйС╗цсђѓ</p> <div class="language-shell extra-class"><pre class="language-shell"><code>redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">ping</span>
PONG
</code></pre></div><p>С╗ЦСИіУ»┤ТўјТѕЉС╗гти▓у╗ЈТѕљтіЪтљ»тіеС║є redisсђѓ</p> <h3 id="redis-тИИУДЂжЁЇуй«"><a href="#redis-тИИУДЂжЁЇуй«" class="header-anchor">#</a> Redis тИИУДЂжЁЇуй«</h3> <blockquote><p>Redis ж╗ўУ«цуџёжЁЇуй«ТќЄС╗ХТў»Та╣уЏ«тйЋСИІуџё <code>redis.conf</code> ТќЄС╗Хсђѓ</p> <p>тдѓТъюжюђУдЂТїЄт«џуЅ╣т«џТќЄС╗ХСйюСИ║жЁЇуй«ТќЄС╗Х№╝їжюђУдЂСй┐ућетЉйС╗ц№╝џ <code>./redis-server -c xxx.conf</code></p> <p>Т»ЈТгАС┐«Тћ╣жЁЇуй«тљј№╝їжюђУдЂжЄЇтљ»ТЅЇУЃйућЪТЋѕсђѓ</p> <p>Redis т«ўТќ╣ж╗ўУ«цжЁЇуй«№╝џ</p> <ul><li>УЄфТЈЈУ┐░ТќЄТАБ <a href="https://raw.githubusercontent.com/antirez/redis/2.8/redis.conf" target="_blank" rel="noopener noreferrer">redis.conf for Redis 2.8<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>УЄфТЈЈУ┐░ТќЄТАБ <a href="https://raw.githubusercontent.com/antirez/redis/2.6/redis.conf" target="_blank" rel="noopener noreferrer">redis.conf for Redis 2.6<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>УЄфТЈЈУ┐░ТќЄТАБ <a href="https://raw.githubusercontent.com/antirez/redis/2.4/redis.conf" target="_blank" rel="noopener noreferrer">redis.conf for Redis 2.4<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ul> <p>УЄф Redis2.6 Ухит░▒тЈ»С╗ЦуЏ┤ТјЦжђџУ┐ЄтЉйС╗цУАїС╝ажђњ Redis жЁЇуй«тЈѓТЋ░сђѓУ┐ЎуДЇТќ╣Т│ЋтЈ»С╗ЦућеС║јТхІУ»ЋсђѓУЄф Redis2.6 Ухит░▒тЈ»С╗ЦуЏ┤ТјЦжђџУ┐ЄтЉйС╗цУАїС╝ажђњ Redis жЁЇуй«тЈѓТЋ░сђѓУ┐ЎуДЇТќ╣Т│ЋтЈ»С╗ЦућеС║јТхІУ»Ћсђѓ</p></blockquote> <h3 id="У«ЙСИ║т«ѕТіцУ┐ЏуеІ"><a href="#У«ЙСИ║т«ѕТіцУ┐ЏуеІ" class="header-anchor">#</a> У«ЙСИ║т«ѕТіцУ┐ЏуеІ</h3> <p>Redis ж╗ўУ«цС╗ЦжЮът«ѕТіцУ┐ЏуеІТќ╣т╝Јтљ»тіе№╝їУђїжђџтИИТѕЉС╗гС╝џт░є Redis У«ЙСИ║т«ѕТіцУ┐ЏуеІтљ»тіеТќ╣т╝Ј№╝їжЁЇуй«№╝џ<code>daemonize yes</code></p> <h4 id="У┐юуеІУ«┐жЌ«"><a href="#У┐юуеІУ«┐жЌ«" class="header-anchor">#</a> У┐юуеІУ«┐жЌ«</h4> <p>Redis ж╗ўУ«цу╗Љт«џ 127.0.0.1№╝їУ┐ЎТаит░▒тЈфУЃйТюгТю║ТЅЇУЃйУ«┐жЌ«№╝їУІЦУдЂ Redis тЁЂУ«ИУ┐юуеІУ«┐жЌ«№╝їжюђУдЂжЁЇуй«№╝џ<code>bind 0.0.0.0</code></p> <h4 id="У«Йуй«т»єуаЂ"><a href="#У«Йуй«т»єуаЂ" class="header-anchor">#</a> У«Йуй«т»єуаЂ</h4> <p>Redis ж╗ўУ«цУ«┐жЌ«СИЇжюђУдЂт»єуаЂ№╝їтдѓТъюжюђУдЂУ«Йуй«т»єуаЂ№╝їжюђУдЂтдѓСИІжЁЇуй«№╝џ</p> <ul><li><code>protected-mode yes</code></li> <li><code>requirepass &lt;т»єуаЂ&gt;</code></li></ul> <h4 id="жЁЇуй«тЈѓТЋ░УАе"><a href="#жЁЇуй«тЈѓТЋ░УАе" class="header-anchor">#</a> жЁЇуй«тЈѓТЋ░УАе</h4> <table><thead><tr><th style="text-align:left;">жЁЇуй«жА╣</th> <th style="text-align:left;">У»┤Тўј</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>daemonize no</code></td> <td style="text-align:left;">Redis ж╗ўУ«цСИЇТў»С╗Цт«ѕТіцУ┐ЏуеІуџёТќ╣т╝ЈУ┐љУАї№╝їтЈ»С╗ЦжђџУ┐ЄУ»ЦжЁЇуй«жА╣С┐«Тћ╣№╝їСй┐уће yes тљ»ућет«ѕТіцУ┐ЏуеІ№╝ѕWindows СИЇТћ»ТїЂт«ѕТіцу║┐уеІуџёжЁЇуй«СИ║ no №╝Ѕ</td></tr> <tr><td style="text-align:left;"><code>pidfile /var/run/redis.pid</code></td> <td style="text-align:left;">тйЊ Redis С╗Цт«ѕТіцУ┐ЏуеІТќ╣т╝ЈУ┐љУАїТЌХ№╝їRedis ж╗ўУ«цС╝џТіі pid тєЎтЁЦ /var/run/redis.pid ТќЄС╗Х№╝їтЈ»С╗ЦжђџУ┐Є pidfile ТїЄт«џ</td></tr> <tr><td style="text-align:left;"><code>port 6379</code></td> <td style="text-align:left;">ТїЄт«џ Redis уЏЉтљгуФ»тЈБ№╝їж╗ўУ«цуФ»тЈБСИ║ 6379№╝їСйюУђЁтюеУЄфти▒уџёСИђу»ЄтЇџТќЄСИГУДБжЄіС║єСИ║С╗ђС╣ѕжђЅуће 6379 СйюСИ║ж╗ўУ«цуФ»тЈБ№╝їтЏаСИ║ 6379 тюеТЅІТю║ТїЅжћ«СИі MERZ т»╣т║ћуџётЈиуаЂ№╝їУђї MERZ тЈќУЄфТёЈтцДтѕЕТГїтЦ│ Alessia Merz уџётљЇтГЌ</td></tr> <tr><td style="text-align:left;"><code>bind 127.0.0.1</code></td> <td style="text-align:left;">у╗Љт«џуџёСИ╗Тю║тю░тЮђ</td></tr> <tr><td style="text-align:left;"><code>timeout 300</code></td> <td style="text-align:left;">тйЊт«бТѕиуФ»жЌ▓уй«тцџжЋ┐ТЌХжЌ┤тљјтЁ│жЌГУ┐ъТјЦ№╝їтдѓТъюТїЄт«џСИ║ 0№╝їУАеуц║тЁ│жЌГУ»ЦтіЪУЃй</td></tr> <tr><td style="text-align:left;"><code>loglevel notice</code></td> <td style="text-align:left;">ТїЄт«џТЌЦт┐ЌУ«░тйЋу║ДтѕФ№╝їRedis Тђ╗тЁ▒Тћ»ТїЂтЏЏСИфу║ДтѕФ№╝џdebugсђЂverboseсђЂnoticeсђЂwarning№╝їж╗ўУ«цСИ║ notice</td></tr> <tr><td style="text-align:left;"><code>logfile stdout</code></td> <td style="text-align:left;">ТЌЦт┐ЌУ«░тйЋТќ╣т╝Ј№╝їж╗ўУ«цСИ║ТаЄтЄєУЙЊтЄ║№╝їтдѓТъюжЁЇуй« Redis СИ║т«ѕТіцУ┐ЏуеІТќ╣т╝ЈУ┐љУАї№╝їУђїУ┐ЎжЄїтЈѕжЁЇуй«СИ║ТЌЦт┐ЌУ«░тйЋТќ╣т╝ЈСИ║ТаЄтЄєУЙЊтЄ║№╝їтѕЎТЌЦт┐Ќт░єС╝џтЈЉжђЂу╗Ў /dev/null</td></tr> <tr><td style="text-align:left;"><code>databases 16</code></td> <td style="text-align:left;">У«Йуй«ТЋ░ТЇ«т║ЊуџёТЋ░жЄЈ№╝їж╗ўУ«цТЋ░ТЇ«т║ЊСИ║ 0№╝їтЈ»С╗ЦСй┐уће SELECT тЉйС╗цтюеУ┐ъТјЦСИіТїЄт«џТЋ░ТЇ«т║Њ id</td></tr> <tr><td style="text-align:left;"><code>save &lt;seconds&gt; &lt;changes&gt;</code> Redis ж╗ўУ«цжЁЇуй«ТќЄС╗ХСИГТЈљСЙЏС║єСИЅСИфТЮАС╗Х№╝џ<strong>save 900 1</strong>сђЂ<strong>save 300 10</strong>сђЂ<strong>save 60 10000</strong> тѕєтѕФУАеуц║ 900 уДњ№╝ѕ15 тѕєжњЪ№╝ЅтєЁТюЅ 1 СИфТЏ┤Тћ╣№╝ї300 уДњ№╝ѕ5 тѕєжњЪ№╝ЅтєЁТюЅ 10 СИфТЏ┤Тћ╣С╗ЦтЈі 60 уДњтєЁТюЅ 10000 СИфТЏ┤Тћ╣сђѓ</td> <td style="text-align:left;">ТїЄт«џтюетцџжЋ┐ТЌХжЌ┤тєЁ№╝їТюЅтцџт░ЉТгАТЏ┤Тќ░ТЊЇСйю№╝їт░▒т░єТЋ░ТЇ«тљїТГЦтѕ░ТЋ░ТЇ«ТќЄС╗Х№╝їтЈ»С╗ЦтцџСИфТЮАС╗ХжЁЇтљѕ</td></tr> <tr><td style="text-align:left;"><code>rdbcompression yes</code></td> <td style="text-align:left;">ТїЄт«џтГўтѓеУЄ│Тюгтю░ТЋ░ТЇ«т║ЊТЌХТў»тљдтјІу╝ЕТЋ░ТЇ«№╝їж╗ўУ«цСИ║ yes№╝їRedis жЄЄуће LZF тјІу╝Е№╝їтдѓТъюСИ║С║єУіѓуюЂ CPU ТЌХжЌ┤№╝їтЈ»С╗ЦтЁ│жЌГУ»ЦжђЅжА╣№╝їСйєС╝џт»╝УЄ┤ТЋ░ТЇ«т║ЊТќЄС╗ХтЈўуџётиетцД</td></tr> <tr><td style="text-align:left;"><code>dbfilename dump.rdb</code></td> <td style="text-align:left;">ТїЄт«џТюгтю░ТЋ░ТЇ«т║ЊТќЄС╗ХтљЇ№╝їж╗ўУ«цтђ╝СИ║ dump.rdb</td></tr> <tr><td style="text-align:left;"><code>dir ./</code></td> <td style="text-align:left;">ТїЄт«џТюгтю░ТЋ░ТЇ«т║ЊтГўТћЙуЏ«тйЋ</td></tr> <tr><td style="text-align:left;"><code>slaveof &lt;masterip&gt; &lt;masterport&gt;</code></td> <td style="text-align:left;">У«Йуй«тйЊТюгТю║СИ║ slav ТюЇтіАТЌХ№╝їУ«Йуй« master ТюЇтіАуџё IP тю░тЮђтЈіуФ»тЈБ№╝їтюе Redis тљ»тіеТЌХ№╝їт«ЃС╝џУЄфтіеС╗ј master У┐ЏУАїТЋ░ТЇ«тљїТГЦ</td></tr> <tr><td style="text-align:left;"><code>masterauth &lt;master-password&gt;</code></td> <td style="text-align:left;">тйЊ master ТюЇтіАУ«Йуй«С║єт»єуаЂС┐ЮТіцТЌХ№╝їslav ТюЇтіАУ┐ъТјЦ master уџёт»єуаЂ</td></tr> <tr><td style="text-align:left;"><code>requirepass foobared</code></td> <td style="text-align:left;">У«Йуй« Redis У┐ъТјЦт»єуаЂ№╝їтдѓТъюжЁЇуй«С║єУ┐ъТјЦт»єуаЂ№╝їт«бТѕиуФ»тюеУ┐ъТјЦ Redis ТЌХжюђУдЂжђџУ┐Є AUTH <password> тЉйС╗цТЈљСЙЏт»єуаЂ№╝їж╗ўУ«цтЁ│жЌГ</password></td></tr> <tr><td style="text-align:left;"><code>maxclients 128</code></td> <td style="text-align:left;">У«Йуй«тљїСИђТЌХжЌ┤ТюђтцДт«бТѕиуФ»У┐ъТјЦТЋ░№╝їж╗ўУ«цТЌажЎљтѕХ№╝їRedis тЈ»С╗ЦтљїТЌХТЅЊт╝ђуџёт«бТѕиуФ»У┐ъТјЦТЋ░СИ║ Redis У┐ЏуеІтЈ»С╗ЦТЅЊт╝ђуџёТюђтцДТќЄС╗ХТЈЈУ┐░угдТЋ░№╝їтдѓТъюУ«Йуй« maxclients 0№╝їУАеуц║СИЇСйюжЎљтѕХсђѓтйЊт«бТѕиуФ»У┐ъТјЦТЋ░тѕ░УЙЙжЎљтѕХТЌХ№╝їRedis С╝џтЁ│жЌГТќ░уџёУ┐ъТјЦт╣ХтљЉт«бТѕиуФ»У┐ћтЏъ max number of clients reached жћЎУ»»С┐АТЂ»</td></tr> <tr><td style="text-align:left;"><code>maxmemory &lt;bytes&gt;</code></td> <td style="text-align:left;">ТїЄт«џ Redis ТюђтцДтєЁтГўжЎљтѕХ№╝їRedis тюетљ»тіеТЌХС╝џТііТЋ░ТЇ«тіаУййтѕ░тєЁтГўСИГ№╝їУЙЙтѕ░ТюђтцДтєЁтГўтљј№╝їRedis С╝џтЁѕт░ЮУ»ЋТИЁжЎцти▓тѕ░ТюЪТѕќтЇ│т░єтѕ░ТюЪуџё Key№╝їтйЊТГцТќ╣Т│Ћтцёуљє тљј№╝їС╗ЇуёХтѕ░УЙЙТюђтцДтєЁтГўУ«Йуй«№╝їт░єТЌаТ│ЋтєЇУ┐ЏУАїтєЎтЁЦТЊЇСйю№╝їСйєС╗ЇуёХтЈ»С╗ЦУ┐ЏУАїУ»╗тЈќТЊЇСйюсђѓRedis Тќ░уџё vm Тю║тѕХ№╝їС╝џТіі Key тГўТћЙтєЁтГў№╝їValue С╝џтГўТћЙтюе swap тї║</td></tr> <tr><td style="text-align:left;"><code>appendonly no</code></td> <td style="text-align:left;">ТїЄт«џТў»тљдтюеТ»ЈТгАТЏ┤Тќ░ТЊЇСйютљјУ┐ЏУАїТЌЦт┐ЌУ«░тйЋ№╝їRedis тюеж╗ўУ«цТЃЁтєхСИІТў»т╝ѓТГЦуџёТііТЋ░ТЇ«тєЎтЁЦуБЂуЏў№╝їтдѓТъюСИЇт╝ђтљ»№╝їтЈ»УЃйС╝џтюеТќГућхТЌХт»╝УЄ┤СИђТ«хТЌХжЌ┤тєЁуџёТЋ░ТЇ«СИбтц▒сђѓтЏаСИ║ redis ТюгУ║ФтљїТГЦТЋ░ТЇ«ТќЄС╗ХТў»ТїЅСИіжЮб save ТЮАС╗ХТЮЦтљїТГЦуџё№╝їТЅђС╗ЦТюЅуџёТЋ░ТЇ«С╝џтюеСИђТ«хТЌХжЌ┤тєЁтЈфтГўтюеС║јтєЁтГўСИГсђѓж╗ўУ«цСИ║ no</td></tr> <tr><td style="text-align:left;"><code>appendfilename appendonly.aof</code></td> <td style="text-align:left;">ТїЄт«џТЏ┤Тќ░ТЌЦт┐ЌТќЄС╗ХтљЇ№╝їж╗ўУ«цСИ║ appendonly.aof</td></tr> <tr><td style="text-align:left;"><code>appendfsync everysec</code></td> <td style="text-align:left;">ТїЄт«џТЏ┤Тќ░ТЌЦт┐ЌТЮАС╗Х№╝їтЁ▒ТюЅ 3 СИфтЈ»жђЅтђ╝№╝џ<strong>no</strong>№╝џУАеуц║уГЅТЊЇСйюу│╗у╗ЪУ┐ЏУАїТЋ░ТЇ«у╝ЊтГўтљїТГЦтѕ░уБЂуЏў№╝ѕт┐Ф№╝Ѕ<strong>always</strong>№╝џУАеуц║Т»ЈТгАТЏ┤Тќ░ТЊЇСйютљјТЅІтіеУ░Ѓуће fsync() т░єТЋ░ТЇ«тєЎтѕ░уБЂуЏў№╝ѕТЁб№╝їт«ЅтЁе№╝Ѕ<strong>everysec</strong>№╝џУАеуц║Т»ЈуДњтљїТГЦСИђТгА№╝ѕТіўСИГ№╝їж╗ўУ«цтђ╝№╝Ѕ</td></tr> <tr><td style="text-align:left;"><code>vm-enabled no</code></td> <td style="text-align:left;">ТїЄт«џТў»тљдтљ»ућеУЎџТІЪтєЁтГўТю║тѕХ№╝їж╗ўУ«цтђ╝СИ║ no№╝їу«ђтЇЋуџёС╗Іу╗ЇСИђСИІ№╝їVM Тю║тѕХт░єТЋ░ТЇ«тѕєжАхтГўТћЙ№╝їућ▒ Redis т░єУ«┐жЌ«жЄЈУЙЃт░ЉуџёжАхтЇ│тєиТЋ░ТЇ« swap тѕ░уБЂуЏўСИі№╝їУ«┐жЌ«тцџуџёжАхжЮбућ▒уБЂуЏўУЄфтіеТЇбтЄ║тѕ░тєЁтГўСИГ№╝ѕтюетљјжЮбуџёТќЄуФаТѕЉС╝џС╗ћу╗єтѕєТъљ Redis уџё VM Тю║тѕХ№╝Ѕ</td></tr> <tr><td style="text-align:left;"><code>vm-swap-file /tmp/redis.swap</code></td> <td style="text-align:left;">УЎџТІЪтєЁтГўТќЄС╗ХУи»тЙё№╝їж╗ўУ«цтђ╝СИ║ /tmp/redis.swap№╝їСИЇтЈ»тцџСИф Redis т«ъСЙІтЁ▒С║Ф</td></tr> <tr><td style="text-align:left;"><code>vm-max-memory 0</code></td> <td style="text-align:left;">т░єТЅђТюЅтцДС║ј vm-max-memory уџёТЋ░ТЇ«тГўтЁЦУЎџТІЪтєЁтГў№╝їТЌаУ«║ vm-max-memory У«Йуй«тцџт░Ј№╝їТЅђТюЅу┤бт╝ЋТЋ░ТЇ«жЃйТў»тєЁтГўтГўтѓеуџё(Redis уџёу┤бт╝ЋТЋ░ТЇ« т░▒Тў» keys)№╝їС╣Ът░▒Тў»У»┤№╝їтйЊ vm-max-memory У«Йуй«СИ║ 0 уџёТЌХтђЎ№╝їтЁХт«ъТў»ТЅђТюЅ value жЃйтГўтюеС║јуБЂуЏўсђѓж╗ўУ«цтђ╝СИ║ 0</td></tr> <tr><td style="text-align:left;"><code>vm-page-size 32</code></td> <td style="text-align:left;">Redis swap ТќЄС╗ХтѕєТѕљС║єтЙѕтцџуџё page№╝їСИђСИфт»╣У▒АтЈ»С╗ЦС┐ЮтГўтюетцџСИф page СИіжЮб№╝їСйєСИђСИф page СИіСИЇУЃйУбФтцџСИфт»╣У▒АтЁ▒С║Ф№╝їvm-page-size Тў»УдЂТа╣ТЇ«тГўтѓеуџё ТЋ░ТЇ«тцДт░ЈТЮЦУ«Йт«џуџё№╝їСйюУђЁт╗║У««тдѓТъютГўтѓетЙѕтцџт░Јт»╣У▒А№╝їpage тцДт░ЈТюђтЦйУ«Йуй«СИ║ 32 ТѕќУђЁ 64bytes№╝ЏтдѓТъютГўтѓетЙѕтцДтцДт»╣У▒А№╝їтѕЎтЈ»С╗ЦСй┐ућеТЏ┤тцДуџё page№╝їтдѓТъюСИЇуА«т«џ№╝їт░▒Сй┐ућеж╗ўУ«цтђ╝</td></tr> <tr><td style="text-align:left;"><code>vm-pages 134217728</code></td> <td style="text-align:left;">У«Йуй« swap ТќЄС╗ХСИГуџё page ТЋ░жЄЈ№╝їућ▒С║јжАхУАе№╝ѕСИђуДЇУАеуц║жАхжЮбуЕ║жЌ▓ТѕќСй┐ућеуџё bitmap№╝ЅТў»тюеТћЙтюетєЁтГўСИГуџё№╝ї№╝їтюеуБЂуЏўСИіТ»Ј 8 СИф pages т░єТХѕУђЌ 1byte уџётєЁтГўсђѓ</td></tr> <tr><td style="text-align:left;"><code>vm-max-threads 4</code></td> <td style="text-align:left;">У«Йуй«У«┐жЌ« swap ТќЄС╗Хуџёу║┐уеІТЋ░,ТюђтЦйСИЇУдЂУХЁУ┐ЄТю║тЎеуџёТаИТЋ░,тдѓТъюУ«Йуй«СИ║ 0,жѓБС╣ѕТЅђТюЅт»╣ swap ТќЄС╗ХуџёТЊЇСйюжЃйТў»СИ▓УАїуџё№╝їтЈ»УЃйС╝џжђаТѕљТ»ћУЙЃжЋ┐ТЌХжЌ┤уџёт╗ХУ┐Ъсђѓж╗ўУ«цтђ╝СИ║ 4</td></tr> <tr><td style="text-align:left;"><code>glueoutputbuf yes</code></td> <td style="text-align:left;">У«Йуй«тюетљЉт«бТѕиуФ»т║ћуГћТЌХ№╝їТў»тљдТііУЙЃт░ЈуџётїЁтљѕт╣ХСИ║СИђСИфтїЁтЈЉжђЂ№╝їж╗ўУ«цСИ║т╝ђтљ»</td></tr> <tr><td style="text-align:left;"><code>hash-max-zipmap-entries 64 hash-max-zipmap-value 512</code></td> <td style="text-align:left;">ТїЄт«џтюеУХЁУ┐ЄСИђт«џуџёТЋ░жЄЈТѕќУђЁТюђтцДуџётЁЃу┤аУХЁУ┐ЄТЪљСИђСИ┤уЋїтђ╝ТЌХ№╝їжЄЄућеСИђуДЇуЅ╣Т«іуџётЊѕтИїу«ЌТ│Ћ</td></tr> <tr><td style="text-align:left;"><code>activerehashing yes</code></td> <td style="text-align:left;">ТїЄт«џТў»тљдТ┐ђТ┤╗жЄЇуй«тЊѕтИї№╝їж╗ўУ«цСИ║т╝ђтљ»№╝ѕтљјжЮбтюеС╗Іу╗Ї Redis уџётЊѕтИїу«ЌТ│ЋТЌХтЁиСйЊС╗Іу╗Ї№╝Ѕ</td></tr> <tr><td style="text-align:left;"><code>include /path/to/local.conf</code></td> <td style="text-align:left;">ТїЄт«џтїЁтљФтЁХт«ЃуџёжЁЇуй«ТќЄС╗Х№╝їтЈ»С╗ЦтюетљїСИђСИ╗Тю║СИітцџСИф Redis т«ъСЙІС╣ІжЌ┤Сй┐ућетљїСИђС╗йжЁЇуй«ТќЄС╗Х№╝їУђїтљїТЌХтљёСИфт«ъСЙІтЈѕТІЦТюЅУЄфти▒уџёуЅ╣т«џжЁЇуй«ТќЄС╗Х</td></tr></tbody></table> <h3 id="тјІтіЏТхІУ»Ћ"><a href="#тјІтіЏТхІУ»Ћ" class="header-anchor">#</a> тјІтіЏТхІУ»Ћ</h3> <blockquote><p>тЈѓУђЃт«ўТќ╣ТќЄТАБ№╝џ<a href="https://redis.io/topics/benchmarks" target="_blank" rel="noopener noreferrer">How fast is Redis?<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>Redis УЄфтИдС║єСИђСИфТђДУЃйТхІУ»ЋтиЦтЁи№╝џ<code>redis-benchmark</code></p> <p><strong>№╝ѕ1№╝ЅтЪ║ТюгТхІУ»Ћ</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>redis-benchmark -q -n <span class="token number">100000</span>
</code></pre></div><ul><li><code>-q</code> УАеуц║жЮЎж╗ў№╝ѕquiet№╝ЅТЅДУАї</li> <li><code>-n 100000</code> У»иТ▒ѓ 10 СИЄТгА</li></ul> <p><strong>№╝ѕ2№╝ЅТхІУ»ЋТїЄт«џУ»╗тєЎТїЄС╗ц</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ redis-benchmark -t set,lpush -n <span class="token number">100000</span> -q
SET: <span class="token number">74239.05</span> requests per second
LPUSH: <span class="token number">79239.30</span> requests per second
</code></pre></div><p><strong>№╝ѕ3№╝ЅТхІУ»Ћ pipeline ТеАт╝ЈСИІТїЄт«џУ»╗тєЎТїЄС╗ц</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>redis-benchmark -n <span class="token number">1000000</span> -t set,get -P <span class="token number">16</span> -q
SET: <span class="token number">403063.28</span> requests per second
GET: <span class="token number">508388.41</span> requests per second
</code></pre></div><h2 id="СИЅсђЂredis-жЏєуЙцСй┐ућетњїжЁЇуй«"><a href="#СИЅсђЂredis-жЏєуЙцСй┐ућетњїжЁЇуй«" class="header-anchor">#</a> СИЅсђЂRedis жЏєуЙцСй┐ућетњїжЁЇуй«</h2> <p>Redis 3.0 тљјТћ»ТїЂжЏєуЙцТеАт╝Јсђѓ</p> <h3 id="жЏєуЙцУДётѕњ"><a href="#жЏєуЙцУДётѕњ" class="header-anchor">#</a> жЏєуЙцУДётѕњ</h3> <p><code>Redis</code> жЏєуЙцСИђУѕгућ▒ <strong>тцџСИфУіѓуѓ╣</strong> у╗ёТѕљ№╝їУіѓуѓ╣ТЋ░жЄЈУЄ│т░ЉСИ║ <code>6</code> СИф№╝їТЅЇУЃйС┐ЮУ»Ђу╗ёТѕљ <strong>т«їТЋ┤жФўтЈ»уће</strong> уџёжЏєуЙцсђѓ</p> <p><img src="https://user-gold-cdn.xitu.io/2019/10/10/16db5250b0d1c392?w=1467&amp;h=803&amp;f=png&amp;s=43428" alt="img"></p> <p>уљєТЃ│ТЃЁтєхтйЊуёХТў»ТЅђТюЅУіѓуѓ╣тљёУЄфтюеСИЇтљїуџёТю║тЎеСИі№╝їждќтЁѕС║јУхёТ║љ№╝їТюгС║║тюежЃеуй▓ Redis жЏєуЙцТЌХ№╝їтЈфтЙЌтѕ░ 3 тЈ░ТюЇтіАтЎесђѓТЅђС╗Ц№╝їТѕЉУ«АтѕњТ»ЈтЈ░ТюЇтіАтЎежЃеуй▓ 2 СИф Redis Уіѓуѓ╣сђѓ</p> <p>сђљуц║СЙІсђЉТюђу«ђжФўтЈ»уће Redis жЏєуЙцУДётѕњ</p> <p>Тю║тЎежЁЇуй«№╝џ16G тєЁтГў + 8 ТаИ CPU + 1T уБЂуЏў</p> <p>Redis У┐ЏуеІтѕєжЁЇ 10 G тєЁтГўсђѓСИђУѕгу║┐СИіућЪС║Дуј»тбЃ№╝їRedis уџётєЁтГўт░йжЄЈСИЇУдЂУХЁУ┐Є 10g№╝їУХЁУ┐Є 10g тЈ»УЃйС╝џТюЅжЌ«жбўсђѓ</p> <p>жЏєуЙцТІЊТЅЉ№╝џСИЅСИ╗СИЅС╗ј№╝ЏСИЅтЊетЁх№╝їТ»ЈСИфтЊетЁхуЏЉтљгТЅђТюЅСИ╗Уіѓуѓ╣сђѓ</p> <p>С╝░у«ЌТђДУЃй№╝џ</p> <ul><li>т«╣жЄЈ№╝џСИЅСИ╗№╝їтЇауће 30 G тєЁтГў№╝їТЅђС╗ЦТюђтцДтГўтѓет«╣жЄЈСИ║ 30 GсђѓтЂЄУ«ЙТ»ЈТЮАТЋ░ТЇ«У«░тйЋт╣│тЮЄ тцДт░ЈСИ║ 10 K№╝їтѕЎТюђтцДУЃйтГўтѓе 300 СИЄТЮАТЋ░ТЇ«сђѓ</li> <li>тљътљљжЄЈ№╝џтЇЋТю║СИђУѕг TPS/QPS СИ║ С║ћСИЄтѕ░тЁФСИЄтидтЈ│сђѓтЂЄУ«ЙСИ║С║ћСИЄ№╝їжѓБС╣ѕСИЅСИ╗СИЅС╗јТъХТъёуљєУ«║СИіУЃйУЙЙтѕ░ TPS 15 СИЄ№╝їQPS 30 СИЄсђѓ</li></ul> <h3 id="жЃеуй▓жЏєуЙц"><a href="#жЃеуй▓жЏєуЙц" class="header-anchor">#</a> жЃеуй▓жЏєуЙц</h3> <blockquote><p>Redis жЏєуЙцУіѓуѓ╣уџёт«ЅУБЁСИјтЇЋУіѓуѓ╣ТюЇтіАуЏИтљї№╝їти«т╝ѓС╗ЁтюеС║јжЃеуй▓Тќ╣т╝Јсђѓ</p> <p>Т│еТёЈ№╝џСИ║С║єТ╝ћуц║Тќ╣СЙ┐№╝їТюгуц║СЙІт░єТЅђТюЅ Redis жЏєуЙцУіѓуѓ╣жЃйжЃеуй▓тюеСИђтЈ░Тю║тЎеСИі№╝їт«ъжЎЁућЪС║Дуј»тбЃСИГ№╝їтЪ║ТюгжЃйС╝џт░єУіѓуѓ╣жЃеуй▓тюеСИЇтљїТю║тЎеСИісђѓУдЂТ▒ѓТЏ┤жФўуџё№╝їтЈ»УЃйУ┐ўУдЂУђЃУЎЉтцџТю║Тѕ┐жЃеуй▓сђѓ</p></blockquote> <p>№╝ѕ1№╝ЅтѕЏт╗║Уіѓуѓ╣уЏ«тйЋ</p> <p>ТѕЉСИфС║║тЂЈтЦйт░єУй»С╗ХТћЙтюе <code>/opt</code> уЏ«тйЋСИІ№╝їтюеТѕЉуџёТю║тЎеСИГ№╝їRedis жЃйт«ЅУБЁтюе <code>/usr/local/redis</code> уЏ«тйЋСИІсђѓТЅђС╗Ц№╝їСИІжЮбуџётЉйС╗цтњїжЁЇуй«жЃйтЂЄУ«Й Redis т«ЅУБЁуЏ«тйЋСИ║ <code>/usr/local/redis</code> сђѓ</p> <p>уА«С┐ЮТю║тЎеСИіти▓у╗Јт«ЅУБЁС║є Redis тљј№╝їТЅДУАїС╗ЦСИІтЉйС╗ц№╝їтѕЏт╗║ Redis жЏєуЙцУіѓуѓ╣т«ъСЙІуЏ«тйЋ№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/7001
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/7002
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/7003
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/7004
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/7005
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/7006
</code></pre></div><p>№╝ѕ2№╝ЅжЁЇуй«жЏєуЙцУіѓуѓ╣</p> <p>Т»ЈСИфт«ъСЙІуЏ«тйЋСИІ№╝їТќ░т╗║ <code>redis.conf</code> жЁЇуй«ТќЄС╗Хсђѓ</p> <p>т«ъСЙІжЁЇуй«ТеАТЮ┐С╗Ц 7001 Уіѓуѓ╣СИ║СЙІ№╝ѕтЁХС╗ќУіѓуѓ╣№╝їт«їтЁеТЏ┐ТЇбжЁЇуй«СИГуџёуФ»тЈБтЈи 7001 тЇ│тЈ»№╝Ѕ№╝їтдѓСИІ№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># уФ»тЈБтЈи</span>
port <span class="token number">7001</span>
<span class="token comment"># у╗Љт«џуџёСИ╗Тю║уФ»тЈБ№╝ѕ0.0.0.0 УАеуц║тЁЂУ«ИУ┐юуеІУ«┐жЌ«№╝Ѕ</span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
<span class="token comment"># С╗Цт«ѕТіцУ┐ЏуеІТќ╣т╝Јтљ»тіе</span>
daemonize <span class="token function">yes</span>

<span class="token comment"># т╝ђтљ»жЏєуЙцТеАт╝Ј</span>
cluster-enabled <span class="token function">yes</span>
<span class="token comment"># жЏєуЙцуџёжЁЇуй«№╝їжЁЇуй«ТќЄС╗ХждќТгАтљ»тіеУЄфтіеућЪТѕљ</span>
cluster-config-file /usr/local/redis/conf/7001/7001.conf
<span class="token comment"># У»иТ▒ѓУХЁТЌХТЌХжЌ┤№╝їУ«Йуй« 10 уДњ</span>
cluster-node-timeout <span class="token number">10000</span>

<span class="token comment"># т╝ђтљ» AOF ТїЂС╣Ётїќ</span>
appendonly <span class="token function">yes</span>
<span class="token comment"># ТЋ░ТЇ«тГўТћЙуЏ«тйЋ</span>
<span class="token function">dir</span> /usr/local/redis/conf/7001
<span class="token comment"># У┐ЏуеІТќЄС╗Х</span>
pidfile /usr/local/redis/conf/7001/7001.pid
<span class="token comment"># ТЌЦт┐ЌТќЄС╗Х</span>
logfile /usr/local/redis/conf/7001/7001.log
</code></pre></div><p>№╝ѕ3№╝ЅТЅ╣жЄЈтљ»тіе Redis Уіѓуѓ╣</p> <p>Redis уџё utils/create-cluster уЏ«тйЋСИІУЄфтИдС║єСИђСИфтљЇСИ║ create-cluster уџёУёџТюгтиЦтЁи№╝їтЈ»С╗ЦтѕЕућет«ЃТЮЦТќ░т╗║сђЂтљ»тіесђЂтЂюТГбсђЂжЄЇтљ» Redis Уіѓуѓ╣сђѓ</p> <p>УёџТюгСИГТюЅтЄаСИфтЁ│жћ«тЈѓТЋ░№╝џ</p> <ul><li><code>PORT</code>=30000 - тѕЮтДІуФ»тЈБтЈи</li> <li><code>TIMEOUT</code>=2000 - УХЁТЌХТЌХжЌ┤</li> <li><code>NODES</code>=6 - Уіѓуѓ╣ТЋ░</li> <li><code>REPLICAS</code>=1 - тцЄС╗йТЋ░</li></ul> <p>УёџТюгСИГуџёТ»ЈСИфтЉйС╗цжА╣С╝џТа╣ТЇ«тѕЮтДІуФ»тЈБтЈи№╝їС╗ЦтЈіУ«Йуй«уџёУіѓуѓ╣ТЋ░№╝їжЂЇтјєуџётј╗ТЅДУАїТЊЇСйюсђѓ</p> <p>ућ▒С║јтЅЇжЮбуџёУДётѕњСИГ№╝їУіѓуѓ╣уФ»тЈБТў»С╗ј 7001 ~ 7006№╝їТЅђС╗ЦжюђУдЂт░є PORT тЈўжЄЈУ«ЙСИ║ 7000сђѓ</p> <p>УёџТюгСИГтљ»тіеТ»ЈСИф Redis Уіѓуѓ╣Тў»жђџУ┐ЄТїЄт«џтЉйС╗цУАїтЈѓТЋ░ТЮЦжЁЇуй«т▒ъТђДсђѓТЅђС╗Ц№╝їТѕЉС╗гжюђУдЂТћ╣СИђСИІ№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">7000</span>
<span class="token assign-left variable">TIMEOUT</span><span class="token operator">=</span><span class="token number">2000</span>
<span class="token assign-left variable">NODES</span><span class="token operator">=</span><span class="token number">6</span>
<span class="token assign-left variable">ENDPORT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>PORT<span class="token operator">+</span>NODES<span class="token variable">))</span></span>

<span class="token comment"># ...</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;start&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$((</span>PORT <span class="token operator">&lt;</span> ENDPORT<span class="token variable">))</span></span> <span class="token operator">!=</span> <span class="token string">&quot;0&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>PORT<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;Starting <span class="token variable">$PORT</span>&quot;</span>
        /usr/local/redis/src/redis-server /usr/local/redis/conf/<span class="token variable">${PORT}</span>/redis.conf
    <span class="token keyword">done</span>
    <span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token keyword">fi</span>
</code></pre></div><p>тЦйС║є№╝їтюеТ»ЈтЈ░ТюЇтіАтЎеСИі№╝їжЃйТЅДУАї <code>./create-cluster start</code> ТЮЦтљ»тіеУіѓуѓ╣сђѓ</p> <p>уёХтљј№╝їжђџУ┐Є ps тЉйС╗цТЮЦуА«У«ц Redis У┐ЏуеІТў»тљдти▓у╗ЈтиЦСйю№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># root @ dbClusterDev01 in /usr/local/redis/conf [11:07:55]</span>
$ <span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> redis
root      <span class="token number">4604</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">11</span>:07 ?        00:00:00 /opt/redis/src/redis-server <span class="token number">0.0</span>.0.0:7001 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">4609</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">11</span>:07 ?        00:00:00 /opt/redis/src/redis-server <span class="token number">0.0</span>.0.0:7002 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">4614</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">11</span>:07 ?        00:00:00 /opt/redis/src/redis-server <span class="token number">0.0</span>.0.0:7003 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">4619</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">11</span>:07 ?        00:00:00 /opt/redis/src/redis-server <span class="token number">0.0</span>.0.0:7004 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">4624</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">11</span>:07 ?        00:00:00 /opt/redis/src/redis-server <span class="token number">0.0</span>.0.0:7005 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">4629</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">11</span>:07 ?        00:00:00 /opt/redis/src/redis-server <span class="token number">0.0</span>.0.0:7006 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
</code></pre></div><p>№╝ѕ4№╝Ѕтљ»тіежЏєуЙц</p> <p>жђџУ┐Є <code>redis-cli --cluster create</code> тЉйС╗цтЈ»С╗ЦУЄфтіежЁЇуй«жЏєуЙц№╝їтдѓСИІ№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./redis-cli --cluster create <span class="token number">127.0</span>.0.1:7001 <span class="token number">127.0</span>.0.1:7002 <span class="token number">127.0</span>.0.2:7003 <span class="token number">127.0</span>.0.2:7004 <span class="token number">127.0</span>.0.3:7005 <span class="token number">127.0</span>.0.3:7006 --cluster-replicas <span class="token number">1</span>
</code></pre></div><p>redis-cluster С╝џТа╣ТЇ«У«Йуй«уџёУіѓуѓ╣ТЋ░тњїтЅ»ТюгТЋ░УЄфтіетѕєуЅЄ№╝ѕтѕєжЁЇ Hash УЎџТІЪТДй slot№╝Ѕ№╝їтдѓТъюТ╗АТёЈ№╝їУЙЊтЁЦ yes №╝їуЏ┤ТјЦт╝ђтДІтѕєуЅЄсђѓ</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Performing <span class="token builtin class-name">hash</span> slots allocation on <span class="token number">6</span> nodes<span class="token punctuation">..</span>.
Master<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">0</span> - <span class="token number">5460</span>
Master<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">5461</span> - <span class="token number">10922</span>
Master<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">10923</span> - <span class="token number">16383</span>
Adding replica <span class="token number">127.0</span>.0.2:7004 to <span class="token number">127.0</span>.0.1:7001
Adding replica <span class="token number">127.0</span>.0.3:7006 to <span class="token number">127.0</span>.0.2:7003
Adding replica <span class="token number">127.0</span>.0.1:7002 to <span class="token number">127.0</span>.0.3:7005
M: b721235997deb6b9a7a2be690b5b9663db8057c6 <span class="token number">127.0</span>.0.1:7001
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
S: bda9b7036df0bbefe601bda4ce45d3787a2e9bd9 <span class="token number">127.0</span>.0.1:7002
   replicates 3623fff69b5243ed18c02a2fbb6f53069b0f1505
M: 91523c0391a044da6cc9f53bb965aabe89502187 <span class="token number">127.0</span>.0.2:7003
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
S: 9d899cbe49dead7b8c4f769920cdb75714a441ae <span class="token number">127.0</span>.0.2:7004
   replicates b721235997deb6b9a7a2be690b5b9663db8057c6
M: 3623fff69b5243ed18c02a2fbb6f53069b0f1505 <span class="token number">127.0</span>.0.3:7005
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
S: a2869dc153ea4977ca790b76483574a5d56cb40e <span class="token number">127.0</span>.0.3:7006
   replicates 91523c0391a044da6cc9f53bb965aabe89502187
Can I <span class="token builtin class-name">set</span> the above configuration? <span class="token punctuation">(</span>type <span class="token string">'yes'</span> to accept<span class="token punctuation">)</span>: <span class="token function">yes</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Nodes configuration updated
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Assign a different config epoch to each node
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Sending CLUSTER MEET messages to <span class="token function">join</span> the cluster
Waiting <span class="token keyword">for</span> the cluster to <span class="token function">join</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Performing Cluster Check <span class="token punctuation">(</span>using node <span class="token number">127.0</span>.0.1:7001<span class="token punctuation">)</span>
M: b721235997deb6b9a7a2be690b5b9663db8057c6 <span class="token number">127.0</span>.0.1:7001
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
S: a2869dc153ea4977ca790b76483574a5d56cb40e <span class="token number">127.0</span>.0.1:7006
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates 91523c0391a044da6cc9f53bb965aabe89502187
M: 91523c0391a044da6cc9f53bb965aabe89502187 <span class="token number">127.0</span>.0.1:7003
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
M: 3623fff69b5243ed18c02a2fbb6f53069b0f1505 <span class="token number">127.0</span>.0.1:7005
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
S: 9d899cbe49dead7b8c4f769920cdb75714a441ae <span class="token number">127.0</span>.0.1:7004
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates b721235997deb6b9a7a2be690b5b9663db8057c6
S: bda9b7036df0bbefe601bda4ce45d3787a2e9bd9 <span class="token number">127.0</span>.0.1:7002
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates 3623fff69b5243ed18c02a2fbb6f53069b0f1505
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All nodes agree about slots configuration.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Check <span class="token keyword">for</span> <span class="token function">open</span> slots<span class="token punctuation">..</span>.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Check slots coverage<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All <span class="token number">16384</span> slots covered.
</code></pre></div><p>№╝ѕ5№╝ЅТЌЦтИИу╗┤ТіцТЊЇСйю</p> <ul><li>тЁ│жЌГжЏєуЙц - <code>./create-cluster stop</code></li> <li>ТБђТЪЦжЏєуЙцТў»тљдтЂЦт║и№╝ѕТїЄт«џС╗╗ТёЈУіѓуѓ╣тЇ│тЈ»№╝Ѕ№╝џ<code>./redis-cli --cluster check &lt;ip:port&gt;</code></li> <li>т░ЮУ»ЋС┐«тцЇжЏєуЙцУіѓуѓ╣№╝џ<code>./redis-cli --cluster fix &lt;ip:port&gt;</code></li></ul> <h3 id="жЃеуй▓тЊетЁх"><a href="#жЃеуй▓тЊетЁх" class="header-anchor">#</a> жЃеуй▓тЊетЁх</h3> <p>redis-cluster т«ъуј░С║є Redis уџётѕєуЅЄсђЂтцЇтѕХсђѓ</p> <p>Сйє redis-cluster Т▓АТюЅУДБтє│ТЋЁжџюУйгуД╗жЌ«жбў№╝їСИђТЌдС╗╗ТёЈтѕєуЅЄуџё Master Уіѓуѓ╣т«ЋТю║сђЂуйЉу╗юСИЇжђџ№╝їт░▒С╝џт»╝УЄ┤ redis-cluster уџёжЏєуЙцСИЇУЃйтиЦСйюсђѓСИ║С║єУДБтє│жФўтЈ»ућеуџёжЌ«жбў№╝їRedis ТЈљСЙЏС║є Redis тЊетЁхТЮЦуЏЉТјД Redis Уіѓуѓ╣уіХТђЂ№╝їт╣ХСИћС╝џтюе Master т«ЋТю║ТЌХ№╝їтЈЉУхижђЅСИЙ№╝їт░єУ┐ЎСИф Master уџёСИђСИф Slave Уіѓуѓ╣жђЅСИЙСИ║ Masterсђѓ</p> <p>№╝ѕ1№╝ЅтѕЏт╗║Уіѓуѓ╣уЏ«тйЋ</p> <p>ТѕЉСИфС║║тЂЈтЦйт░єУй»С╗ХТћЙтюе <code>/opt</code> уЏ«тйЋСИІ№╝їтюеТѕЉуџёТю║тЎеСИГ№╝їRedis жЃйт«ЅУБЁтюе <code>/usr/local/redis</code> уЏ«тйЋСИІсђѓТЅђС╗Ц№╝їСИІжЮбуџётЉйС╗цтњїжЁЇуй«жЃйтЂЄУ«Й Redis т«ЅУБЁуЏ«тйЋСИ║ <code>/usr/local/redis</code> сђѓ</p> <p>уА«С┐ЮТю║тЎеСИіти▓у╗Јт«ЅУБЁС║є Redis тљј№╝їТЅДУАїС╗ЦСИІтЉйС╗ц№╝їтѕЏт╗║ Redis жЏєуЙцУіѓуѓ╣т«ъСЙІуЏ«тйЋ№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/27001
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/27002
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /usr/local/redis/conf/27003
</code></pre></div><p>№╝ѕ2№╝ЅжЁЇуй«жЏєуЙцУіѓуѓ╣</p> <p>Т»ЈСИфт«ъСЙІуЏ«тйЋСИІ№╝їТќ░т╗║ <code>redis.conf</code> жЁЇуй«ТќЄС╗Хсђѓ</p> <p>т«ъСЙІжЁЇуй«ТеАТЮ┐С╗Ц 7001 Уіѓуѓ╣СИ║СЙІ№╝ѕтЁХС╗ќУіѓуѓ╣№╝їт«їтЁеТЏ┐ТЇбжЁЇуй«СИГуџёуФ»тЈБтЈи 7001 тЇ│тЈ»№╝Ѕ№╝їтдѓСИІ№╝џ</p> <div class="language-shell extra-class"><pre class="language-shell"><code>port <span class="token number">27001</span>
daemonize <span class="token function">yes</span>
sentinel monitor redis-master <span class="token number">172.22</span>.6.3 <span class="token number">7001</span> <span class="token number">2</span>
sentinel down-after-milliseconds redis-master <span class="token number">5000</span>
sentinel failover-timeout redis-master <span class="token number">900000</span>
sentinel parallel-syncs redis-master <span class="token number">1</span>
<span class="token comment">#sentinel auth-pass redis-master 123456</span>
logfile /usr/local/redis/conf/27001/27001.log
</code></pre></div><p>№╝ѕ3№╝ЅТЅ╣жЄЈтљ»тіетЊетЁхУіѓуѓ╣</p> <div class="language- extra-class"><pre class="language-text"><code>/opt/redis/src/redis-sentinel /usr/local/redis/conf/27001/sentinel.conf
/opt/redis/src/redis-sentinel /usr/local/redis/conf/27002/sentinel.conf
/opt/redis/src/redis-sentinel /usr/local/redis/conf/27003/sentinel.conf
</code></pre></div><h3 id="ТЅЕт«╣"><a href="#ТЅЕт«╣" class="header-anchor">#</a> ТЅЕт«╣</h3> <p>№╝ѕ1№╝ЅТЪЦуюІС┐АТЂ»</p> <p>У┐ЏтЁЦС╗╗ТёЈУіѓуѓ╣</p> <div class="language- extra-class"><pre class="language-text"><code>./redis-cli -h 172.22.6.3 -p 7001
</code></pre></div><p>cluster info ТЪЦуюІжЏєуЙцУіѓуѓ╣уіХТђЂ</p> <div class="language- extra-class"><pre class="language-text"><code>172.22.6.3:7001&gt; cluster nodes
f158bf70bb2767cac271ce4efcfc14ba0b7ca98b 172.22.6.3:7006@17006 slave e7aa182e756b76ec85b471797db9b66e4b2da725 0 1594528179000 6 connected
f348e67648460c7a800120d69b4977bf2e4524cb 172.22.6.3:7001@17001 myself,master - 0 1594528179000 1 connected 0-5460
52601e2d4af0e64b83f4cc6d20e8316d0ac38b99 172.22.6.3:7004@17004 slave 4802fafe897160c46392c6e569d6f5e466cca696 0 1594528178000 4 connected
c6c6a68674ae8aac3c6ec792c8af4dc1228c6c31 172.22.6.3:7005@17005 slave f348e67648460c7a800120d69b4977bf2e4524cb 0 1594528179852 5 connected
e7aa182e756b76ec85b471797db9b66e4b2da725 172.22.6.3:7002@17002 master - 0 1594528178000 2 connected 5461-10922
4802fafe897160c46392c6e569d6f5e466cca696 172.22.6.3:7003@17003 master - 0 1594528178000 3 connected 10923-16383
</code></pre></div><p>cluster info ТЪЦуюІжЏєуЙцС┐АТЂ»</p> <div class="language- extra-class"><pre class="language-text"><code>172.22.6.3:7001&gt; cluster info
cluster_state:ok
cluster_slots_assigned:16384
cluster_slots_ok:16384
cluster_slots_pfail:0
cluster_slots_fail:0
cluster_known_nodes:6
cluster_size:3
cluster_current_epoch:6
cluster_my_epoch:1
cluster_stats_messages_ping_sent:3406
cluster_stats_messages_pong_sent:3569
cluster_stats_messages_publish_sent:5035
cluster_stats_messages_sent:12010
cluster_stats_messages_ping_received:3564
cluster_stats_messages_pong_received:3406
cluster_stats_messages_meet_received:5
cluster_stats_messages_publish_received:5033
cluster_stats_messages_received:12008
</code></pre></div><p>№╝ѕ2№╝ЅТи╗тіаУіѓуѓ╣тѕ░жЏєуЙц</p> <p>т░єти▓тљ»тіеуџёУіѓуѓ╣т«ъСЙІТи╗тіатѕ░жЏєуЙцСИГ</p> <div class="language- extra-class"><pre class="language-text"><code>redis-cli --cluster add-node 127.0.0.1:7007 127.0.0.1:7008
</code></pre></div><p><strong>Ти╗тіаСИ╗Уіѓуѓ╣</strong></p> <p>Ти╗тіаСИђу╗ёСИ╗Уіѓуѓ╣</p> <div class="language- extra-class"><pre class="language-text"><code>./redis-cli --cluster add-node 172.22.6.3:7007 172.22.6.3:7001
./redis-cli --cluster add-node 172.22.6.3:7008 172.22.6.3:7001
./redis-cli --cluster add-node 172.22.6.3:7009 172.22.6.3:7001
</code></pre></div><p>ТЪЦуюІУіѓуѓ╣уіХТђЂ</p> <div class="language- extra-class"><pre class="language-text"><code>172.22.6.3:7001&gt; cluster nodes
f158bf70bb2767cac271ce4efcfc14ba0b7ca98b 172.22.6.3:7006@17006 slave e7aa182e756b76ec85b471797db9b66e4b2da725 0 1594529342575 6 connected
f348e67648460c7a800120d69b4977bf2e4524cb 172.22.6.3:7001@17001 myself,master - 0 1594529340000 1 connected 0-5460
55cacf121662833a4a19dbeb4a5df712cfedf77f 172.22.6.3:7009@17009 master - 0 1594529342000 0 connected
c6c6a68674ae8aac3c6ec792c8af4dc1228c6c31 172.22.6.3:7005@17005 slave f348e67648460c7a800120d69b4977bf2e4524cb 0 1594529341573 5 connected
4802fafe897160c46392c6e569d6f5e466cca696 172.22.6.3:7003@17003 master - 0 1594529343577 3 connected 10923-16383
e7aa182e756b76ec85b471797db9b66e4b2da725 172.22.6.3:7002@17002 master - 0 1594529342000 2 connected 5461-10922
e5ba78fe629115977a74fbbe1478caf8868d6d55 172.22.6.3:7007@17007 master - 0 1594529341000 0 connected
52601e2d4af0e64b83f4cc6d20e8316d0ac38b99 172.22.6.3:7004@17004 slave 4802fafe897160c46392c6e569d6f5e466cca696 0 1594529340000 4 connected
79d4fffc2cec210556c3b4c44e63ab506e87eda3 172.22.6.3:7008@17008 master - 0 1594529340000 7 connected
</code></pre></div><p>тЈ»С╗ЦтЈЉуј░№╝їТќ░тіатЁЦуџёСИЅСИфСИ╗Уіѓуѓ╣№╝їУ┐ўТ▓АТюЅтѕєжЁЇтЊѕтИїТДй№╝їТЅђС╗Ц№╝їТџѓТЌХУ┐ўТЌаТ│ЋУ«┐жЌ«сђѓ</p> <p><strong>Ти╗тіаС╗јУіѓуѓ╣</strong></p> <p>--slave№╝џУ«Йуй«У»ЦтЈѓТЋ░№╝їтѕЎТќ░Уіѓуѓ╣С╗Ц slave уџёУДњУЅ▓тіатЁЦжЏєуЙц<br>
--master-id№╝џУ┐ЎСИфтЈѓТЋ░жюђУдЂУ«Йуй«С║є--slave ТЅЇУЃйућЪТЋѕ№╝ї--master-id ућеТЮЦТїЄт«џТќ░Уіѓуѓ╣уџё master Уіѓуѓ╣сђѓтдѓТъюСИЇУ«Йуй«У»ЦтЈѓТЋ░№╝їтѕЎС╝џжџЈТю║СИ║Уіѓуѓ╣жђЅТІЕ master Уіѓуѓ╣сђѓ</p> <p>У»ГТ│Ћ</p> <div class="language- extra-class"><pre class="language-text"><code>redis-cli --cluster add-node  Тќ░Уіѓуѓ╣IPтю░тЮђ№╝џуФ»тЈБ    тГўтюеУіѓуѓ╣IP№╝џуФ»тЈБ --cluster-slave №╝ѕС╗јУіѓуѓ╣№╝Ѕ --cluster-master-id №╝ѕmasterУіѓуѓ╣уџёID№╝Ѕ
redis-cli --cluster add-node   10.42.141.119:6379  10.42.166.105:6379  --cluster-slave   --cluster-master-id  dfa238fff8a7a49230cff7eb74f573f5645c8ec5
</code></pre></div><p>уц║СЙІ</p> <div class="language- extra-class"><pre class="language-text"><code>./redis-cli --cluster add-node 172.22.6.3:7010 172.22.6.3:7007 --cluster-slave
./redis-cli --cluster add-node 172.22.6.3:7011 172.22.6.3:7008 --cluster-slave
./redis-cli --cluster add-node 172.22.6.3:7012 172.22.6.3:7009 --cluster-slave
</code></pre></div><p>ТЪЦуюІуіХТђЂ</p> <div class="language- extra-class"><pre class="language-text"><code>172.22.6.3:7001&gt; cluster nodes
ef5c1b9ce4cc795dc12b2c1e8736a572647b4c3e 172.22.6.3:7011@17011 slave 79d4fffc2cec210556c3b4c44e63ab506e87eda3 0 1594529492043 7 connected
f158bf70bb2767cac271ce4efcfc14ba0b7ca98b 172.22.6.3:7006@17006 slave e7aa182e756b76ec85b471797db9b66e4b2da725 0 1594529491943 6 connected
f348e67648460c7a800120d69b4977bf2e4524cb 172.22.6.3:7001@17001 myself,master - 0 1594529488000 1 connected 0-5460
5140d1129ed850df59c51cf818c4eb74545d9959 172.22.6.3:7010@17010 slave e5ba78fe629115977a74fbbe1478caf8868d6d55 0 1594529488000 0 connected
55cacf121662833a4a19dbeb4a5df712cfedf77f 172.22.6.3:7009@17009 master - 0 1594529488000 8 connected
c6c6a68674ae8aac3c6ec792c8af4dc1228c6c31 172.22.6.3:7005@17005 slave f348e67648460c7a800120d69b4977bf2e4524cb 0 1594529490000 5 connected
4802fafe897160c46392c6e569d6f5e466cca696 172.22.6.3:7003@17003 master - 0 1594529489939 3 connected 10923-16383
e7aa182e756b76ec85b471797db9b66e4b2da725 172.22.6.3:7002@17002 master - 0 1594529491000 2 connected 5461-10922
e5ba78fe629115977a74fbbe1478caf8868d6d55 172.22.6.3:7007@17007 master - 0 1594529490942 0 connected
52601e2d4af0e64b83f4cc6d20e8316d0ac38b99 172.22.6.3:7004@17004 slave 4802fafe897160c46392c6e569d6f5e466cca696 0 1594529491000 4 connected
02e9f57b5b45c350dc57acf1c8efa8db136db7b7 172.22.6.3:7012@17012 master - 0 1594529489000 0 connected
79d4fffc2cec210556c3b4c44e63ab506e87eda3 172.22.6.3:7008@17008 master - 0 1594529489000 7 connected
</code></pre></div><p>тѕєжЁЇтЊѕтИїТДй</p> <p>ТЅДУАї <code>./redis-cli --cluster rebalance 172.22.6.3:7001 --cluster-threshold 1 --cluster-use-empty-masters</code></p> <p>тЈѓТЋ░У»┤Тўј№╝џ</p> <p>rebalance№╝џУАеТўјУ«Е Redis УЄфтіеТа╣ТЇ«Уіѓуѓ╣ТЋ░У┐ЏУАїтЮЄУААтЊѕтИїТДйтѕєжЁЇсђѓ</p> <p>--cluster-use-empty-masters№╝џУАеТўј</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200712125827.png" alt="img"></p> <p>ТЅДУАїу╗ЊТЮЪтљј№╝їТЪЦуюІуіХТђЂ№╝џ</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200712130234.png" alt="img"></p> <h2 id="тЏЏсђЂredis-тЉйС╗ц"><a href="#тЏЏсђЂredis-тЉйС╗ц" class="header-anchor">#</a> тЏЏсђЂRedis тЉйС╗ц</h2> <h3 id="жђџућетЉйС╗ц"><a href="#жђџућетЉйС╗ц" class="header-anchor">#</a> жђџућетЉйС╗ц</h3> <blockquote><p>тЉйС╗цУ»ду╗єућеТ│Ћ№╝їУ»итЈѓУђЃ <a href="https://redis.io/commands" target="_blank" rel="noopener noreferrer"><strong>Redis тЉйС╗цт«ўТќ╣ТќЄТАБ</strong><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ТљгУ┐ЂСИцт╝а cheat sheet тЏЙ№╝їтјЪтЮђ№╝џhttps://www.cheatography.com/tasjaevan/cheat-sheets/redis/</p></blockquote> <p><img src="https://user-gold-cdn.xitu.io/2019/10/10/16db5250b0b8ea57?w=2230&amp;h=2914&amp;f=png&amp;s=246433" alt="img"></p> <p><img src="https://user-gold-cdn.xitu.io/2019/10/10/16db5250b0e9ba3c?w=2229&amp;h=2890&amp;f=png&amp;s=192997" alt="img"></p> <h3 id="жЏєуЙцтЉйС╗ц"><a href="#жЏєуЙцтЉйС╗ц" class="header-anchor">#</a> жЏєуЙцтЉйС╗ц</h3> <ul><li><strong>жЏєуЙц</strong> <ul><li><code>cluster info</code> - ТЅЊтЇ░жЏєуЙцуџёС┐АТЂ»</li> <li><code>cluster nodes</code> - тѕЌтЄ║жЏєуЙцтйЊтЅЇти▓уЪЦуџёТЅђТюЅУіѓуѓ╣№╝ѕ node№╝Ѕ№╝їС╗ЦтЈіУ┐ЎС║ЏУіѓуѓ╣уџёуЏИтЁ│С┐АТЂ»сђѓ</li></ul></li> <li><strong>Уіѓуѓ╣</strong> <ul><li><code>cluster meet &lt;ip&gt; &lt;port&gt;</code> - т░є ip тњї port ТЅђТїЄт«џуџёУіѓуѓ╣Ти╗тіатѕ░жЏєуЙцтйЊСИГ№╝їУ«Ет«ЃТѕљСИ║жЏєуЙцуџёСИђС╗йтГљсђѓ</li> <li><code>cluster forget &lt;node_id&gt;</code> - С╗јжЏєуЙцСИГуД╗жЎц node_id ТїЄт«џуџёУіѓуѓ╣сђѓ</li> <li><code>cluster replicate &lt;node_id&gt;</code> - т░єтйЊтЅЇУіѓуѓ╣У«Йуй«СИ║ node_id ТїЄт«џуџёУіѓуѓ╣уџёС╗јУіѓуѓ╣сђѓ</li> <li><code>cluster saveconfig</code> - т░єУіѓуѓ╣уџёжЁЇуй«ТќЄС╗ХС┐ЮтГўтѕ░уАгуЏўжЄїжЮбсђѓ</li></ul></li> <li><strong>ТДй(slot)</strong> <ul><li><code>cluster addslots &lt;slot&gt; [slot ...]</code> - т░єСИђСИфТѕќтцџСИфТДй№╝ѕ slot№╝ЅТїЄТ┤Й№╝ѕ assign№╝Ѕу╗ЎтйЊтЅЇУіѓуѓ╣сђѓ</li> <li><code>cluster delslots &lt;slot&gt; [slot ...]</code> - уД╗жЎцСИђСИфТѕќтцџСИфТДйт»╣тйЊтЅЇУіѓуѓ╣уџёТїЄТ┤Йсђѓ</li> <li><code>cluster flushslots</code> - уД╗жЎцТїЄТ┤Йу╗ЎтйЊтЅЇУіѓуѓ╣уџёТЅђТюЅТДй№╝їУ«ЕтйЊтЅЇУіѓуѓ╣тЈўТѕљСИђСИфТ▓АТюЅТїЄТ┤ЙС╗╗СйЋТДйуџёУіѓуѓ╣сђѓ</li> <li><code>cluster setslot &lt;slot&gt; node &lt;node_id&gt;</code> - т░єТДй slot ТїЄТ┤Йу╗Ў node_id ТїЄт«џуџёУіѓуѓ╣№╝їтдѓТъюТДйти▓у╗ЈТїЄТ┤Йу╗ЎтЈдСИђСИфУіѓуѓ╣№╝їжѓБС╣ѕтЁѕУ«ЕтЈдСИђСИфУіѓуѓ╣тѕажЎцУ»ЦТДй&gt;№╝їуёХтљјтєЇУ┐ЏУАїТїЄТ┤Йсђѓ</li> <li><code>cluster setslot &lt;slot&gt; migrating &lt;node_id&gt;</code> - т░єТюгУіѓуѓ╣уџёТДй slot У┐ЂуД╗тѕ░ node_id ТїЄт«џуџёУіѓуѓ╣СИГсђѓ</li> <li><code>cluster setslot &lt;slot&gt; importing &lt;node_id&gt;</code> - С╗ј node_id ТїЄт«џуџёУіѓуѓ╣СИГт»╝тЁЦТДй slot тѕ░ТюгУіѓуѓ╣сђѓ</li> <li><code>cluster setslot &lt;slot&gt; stable</code> - тЈќТХѕт»╣ТДй slot уџёт»╝тЁЦ№╝ѕ import№╝ЅТѕќУђЁУ┐ЂуД╗№╝ѕ migrate№╝Ѕсђѓ</li></ul></li> <li><strong>жћ«</strong> <ul><li><code>cluster keyslot &lt;key&gt;</code> - У«Ау«Ќжћ« key т║ћУ»ЦУбФТћЙуй«тюетЊфСИфТДйСИісђѓ</li> <li><code>cluster countkeysinslot &lt;slot&gt;</code> - У┐ћтЏъТДй slot уЏ«тЅЇтїЁтљФуџёжћ«тђ╝т»╣ТЋ░жЄЈсђѓ</li> <li><code>cluster getkeysinslot &lt;slot&gt; &lt;count&gt;</code> - У┐ћтЏъ count СИф slot ТДйСИГуџёжћ«сђѓ</li></ul></li></ul> <h4 id="жЄЇТќ░тѕєуЅЄ"><a href="#жЄЇТќ░тѕєуЅЄ" class="header-anchor">#</a> жЄЇТќ░тѕєуЅЄ</h4> <p>Ти╗тіаУіѓуѓ╣№╝џ./redis-cli --cluster add-node 192.168.1.136:7007 192.168.1.136:7001 --cluster-slave</p> <p>redis-cli --cluster reshard 172.22.6.3 7001</p> <h2 id="С║ћсђЂт«бТѕиуФ»"><a href="#С║ћсђЂт«бТѕиуФ»" class="header-anchor">#</a> С║ћсђЂт«бТѕиуФ»</h2> <p>ТјеУЇљСй┐уће <a href="https://github.com/uglide/RedisDesktopManager" target="_blank" rel="noopener noreferrer"><strong>RedisDesktopManager</strong><svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="тЈѓУђЃУхёТќЎ"><a href="#тЈѓУђЃУхёТќЎ" class="header-anchor">#</a> тЈѓУђЃУхёТќЎ</h2> <ul><li><strong>т«ўуйЉ</strong> <ul><li><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis т«ўуйЉ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/antirez/redis" target="_blank" rel="noopener noreferrer">Redis github<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://redis.cn/" target="_blank" rel="noopener noreferrer">Redis т«ўТќ╣ТќЄТАБСИГТќЄуЅѕ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><strong>С╣ду▒Ї</strong> <ul><li><a href="https://item.jd.com/11791607.html" target="_blank" rel="noopener noreferrer">сђіRedis т«ъТѕўсђІ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://item.jd.com/11486101.html" target="_blank" rel="noopener noreferrer">сђіRedis У«ЙУ«АСИјт«ъуј░сђІ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><strong>ТЋЎуеІ</strong> <ul><li><a href="http://redisdoc.com/" target="_blank" rel="noopener noreferrer">Redis тЉйС╗цтЈѓУђЃ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><strong>ТќЄуФа</strong> <ul><li><a href="https://juejin.im/post/5b8fc5536fb9a05d2d01fb11" target="_blank" rel="noopener noreferrer">Ти▒тЁЦтЅќТъљ Redis у│╗тѕЌ(СИЅ) - Redis жЏєуЙцТеАт╝ЈТљГт╗║СИјтјЪуљєУ»дУДБ<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/db-tutorial/edit/master/docs/nosql/redis/redis-ops.md" target="_blank" rel="noopener noreferrer">тИ«тіЕТѕЉС╗гТћ╣тќёТГцжАхжЮб№╝Ђ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/db-tutorial/assets/js/app.f29cbebc.js" defer></script><script src="/db-tutorial/assets/js/4.af39a5fc.js" defer></script><script src="/db-tutorial/assets/js/46.6e80620c.js" defer></script><script src="/db-tutorial/assets/js/5.0833ef28.js" defer></script>
  </body>
</html>
